(function(){"use strict";function Yn(t,e=document){return typeof t=="string"?Array.from(e.querySelectorAll(t)):t instanceof Element?[t]:t instanceof NodeList?Array.from(t):t instanceof Array?t:[]}function Jn(t){const e=document.createElement("div");e.className=`scrollama__debug-step ${t}`,e.style.position="fixed",e.style.left="0",e.style.width="100%",e.style.zIndex="9999",e.style.borderTop="2px solid black",e.style.borderBottom="2px solid black";const n=document.createElement("p");return n.style.position="absolute",n.style.left="0",n.style.height="1px",n.style.width="100%",n.style.borderTop="1px dashed black",e.appendChild(n),document.body.appendChild(e),e}function Un({id:t,step:e,marginTop:n}){const{index:r,height:i}=e,a=`scrollama__debug-step--${t}-${r}`;let o=document.querySelector(`.${a}`);o||(o=Jn(a)),o.style.top=`${n*-1}px`,o.style.height=`${i}px`,o.querySelector("p").style.top=`${i/2}px`}function Wn(){const t="abcdefghijklmnopqrstuvwxyz",e=Date.now(),n=[];for(let r=0;r<6;r+=1){const i=t[Math.floor(Math.random()*t.length)];n.push(i)}return`${n.join("")}${e}`}function kt(t){console.error(`scrollama error: ${t}`)}function ut(t){return+t.getAttribute("data-scrollama-index")}function Zn(t,e){const n=Math.ceil(t/e),r=[],i=1/n;for(let a=0;a<n+1;a+=1)r.push(a*i);return r}function Zt(t){if(typeof t=="string"&&t.indexOf("px")>0){const e=+t.replace("px","");return isNaN(e)?(err("offset value must be in 'px' format. Fallback to 0.5."),{format:"percent",value:.5}):{format:"pixels",value:e}}else if(typeof t=="number"||!isNaN(+t))return t>1&&err("offset value is greater than 1. Fallback to 1."),t<0&&err("offset value is lower than 0. Fallback to 0."),{format:"percent",value:Math.min(Math.max(0,t),1)};return null}function Qn(t){t.forEach(e=>e.node.setAttribute("data-scrollama-index",e.index))}function jn(t){const{top:e}=t.getBoundingClientRect(),n=window.pageYOffset,r=document.body.clientTop||0;return e+n-r}let j,$t,B;function Oe(t){const e=t?t.scrollTop:window.pageYOffset;j!==e&&(j=e,j>$t?B="down":j<$t&&(B="up"),$t=j)}function tr(t){j=0,$t=0,document.addEventListener("scroll",()=>Oe(t))}function er(){let t={},e=Wn(),n=[],r,i,a,o=0,l=!1,s=!1,u=!1,c=!1,h=[];function f(){t={stepEnter:()=>{},stepExit:()=>{},stepProgress:()=>{}},h=[]}function d(p){p&&!l&&S(),!p&&l&&M(),l=p}function m(p,$){const x=ut(p),A=n[x];$!==void 0&&(A.progress=$);const E={element:p,index:x,progress:$,direction:B};A.state==="enter"&&t.stepProgress(E)}function g(p,$=!0){const x=ut(p),A=n[x],E={element:p,index:x,direction:B};A.direction=B,A.state="enter",h[x]||t.stepEnter(E),c&&(h[x]=!0)}function v(p,$=!0){const x=ut(p),A=n[x];if(!A.state)return!1;const E={element:p,index:x,direction:B};s&&(B==="down"&&A.progress<1?m(p,1):B==="up"&&A.progress>0&&m(p,0)),A.direction=B,A.state="exit",t.stepExit(E)}function b([p]){const $=ut(p.target),x=n[$],A=p.target.offsetHeight;A!==x.height&&(x.height=A,N(x),L(x),O(x))}function w([p]){Oe(i);const{isIntersecting:$,target:x}=p;$?g(x):v(x)}function k([p]){const $=ut(p.target),x=n[$],{isIntersecting:A,intersectionRatio:E,target:T}=p;A&&x.state==="enter"&&m(T,E)}function N({observers:p}){Object.keys(p).map($=>{p[$].disconnect()})}function M(){n.forEach(N)}function O(p){const $=new ResizeObserver(b);$.observe(p.node),p.observers.resize=$}function R(){n.forEach(O)}function L(p){const $=window.innerHeight,x=p.offset||r,A=x.format==="pixels"?1:$,E=x.value*A,T=p.height/2-E,st=p.height/2-($-E),lt={rootMargin:`${T}px 0px ${st}px 0px`,threshold:.5,root:a},Kn=new IntersectionObserver(w,lt);Kn.observe(p.node),p.observers.step=Kn,u&&Un({id:e,step:p,marginTop:T,marginBottom:st})}function K(){n.forEach(L)}function D(p){const $=window.innerHeight,x=p.offset||r,A=x.format==="pixels"?1:$,E=x.value*A,T=-E+p.height,st=E-$,Mt=`${T}px 0px ${st}px 0px`,Wt=Zn(p.height,o),Q={rootMargin:Mt,threshold:Wt},lt=new IntersectionObserver(k,Q);lt.observe(p.node),p.observers.progress=lt}function y(){n.forEach(D)}function S(){M(),R(),K(),s&&y()}const _={};return _.setup=({step:p,parent:$,offset:x=.5,threshold:A=4,progress:E=!1,once:T=!1,debug:st=!1,container:Mt=void 0,root:Wt=null})=>(tr(Mt),n=Yn(p,$).map((Q,lt)=>({index:lt,direction:void 0,height:Q.offsetHeight,node:Q,observers:{},offset:Zt(Q.dataset.offset),top:jn(Q),progress:0,state:void 0})),n.length?(s=E,c=T,u=st,o=Math.max(1,+A),r=Zt(x),i=Mt,a=Wt,f(),Qn(n),d(!0),_):(kt("no step elements"),_)),_.enable=()=>(d(!0),_),_.disable=()=>(d(!1),_),_.destroy=()=>(d(!1),f(),_),_.resize=()=>(S(),_),_.offset=p=>p==null?r.value:(r=Zt(p),S(),_),_.onStepEnter=p=>(typeof p=="function"?t.stepEnter=p:kt("onStepEnter requires a function"),_),_.onStepExit=p=>(typeof p=="function"?t.stepExit=p:kt("onStepExit requires a function"),_),_.onStepProgress=p=>(typeof p=="function"?t.stepProgress=p:kt("onStepProgress requires a function"),_),_}function At(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ze(t){let e,n,r;t.length!==2?(e=At,n=(l,s)=>At(t(l),s),r=(l,s)=>t(l)-s):(e=t===At||t===nr?t:rr,n=t,r=t);function i(l,s,u=0,c=l.length){if(u<c){if(e(s,s)!==0)return c;do{const h=u+c>>>1;n(l[h],s)<0?u=h+1:c=h}while(u<c)}return u}function a(l,s,u=0,c=l.length){if(u<c){if(e(s,s)!==0)return c;do{const h=u+c>>>1;n(l[h],s)<=0?u=h+1:c=h}while(u<c)}return u}function o(l,s,u=0,c=l.length){const h=i(l,s,u,c-1);return h>u&&r(l[h-1],s)>-r(l[h],s)?h-1:h}return{left:i,center:o,right:a}}function rr(){return 0}function ir(t){return t===null?NaN:+t}const ar=ze(At).right;ze(ir).center;class Ie extends Map{constructor(e,n=lr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(He(this,e))}has(e){return super.has(He(this,e))}set(e,n){return super.set(or(this,e),n)}delete(e){return super.delete(sr(this,e))}}function He({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function or({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function sr({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function lr(t){return t!==null&&typeof t=="object"?t.valueOf():t}const ur=Math.sqrt(50),cr=Math.sqrt(10),fr=Math.sqrt(2);function Nt(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=ur?10:a>=cr?5:a>=fr?2:1;let l,s,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(t*u),s=Math.round(e*u),l/u<t&&++l,s/u>e&&--s,u=-u):(u=Math.pow(10,i)*o,l=Math.round(t/u),s=Math.round(e/u),l*u<t&&++l,s*u>e&&--s),s<l&&.5<=n&&n<2?Nt(t,e,n*2):[l,s,u]}function hr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?Nt(e,t,n):Nt(t,e,n);if(!(a>=i))return[];const l=a-i+1,s=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)s[u]=(a-u)/-o;else for(let u=0;u<l;++u)s[u]=(a-u)*o;else if(o<0)for(let u=0;u<l;++u)s[u]=(i+u)/-o;else for(let u=0;u<l;++u)s[u]=(i+u)*o;return s}function Qt(t,e,n){return e=+e,t=+t,n=+n,Nt(t,e,n)[2]}function dr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Qt(e,t,n):Qt(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function jt(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function pr(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function gr(t){return t}var te=1,ee=2,ne=3,ct=4,Le=1e-6;function mr(t){return"translate("+t+",0)"}function yr(t){return"translate(0,"+t+")"}function _r(t){return e=>+t(e)}function vr(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function xr(){return!this.__axis}function Fe(t,e){var n=[],r=null,i=null,a=6,o=6,l=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===te||t===ct?-1:1,c=t===ct||t===ee?"x":"y",h=t===te||t===ne?mr:yr;function f(d){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),g=i??(e.tickFormat?e.tickFormat.apply(e,n):gr),v=Math.max(a,0)+l,b=e.range(),w=+b[0]+s,k=+b[b.length-1]+s,N=(e.bandwidth?vr:_r)(e.copy(),s),M=d.selection?d.selection():d,O=M.selectAll(".domain").data([null]),R=M.selectAll(".tick").data(m,e).order(),L=R.exit(),K=R.enter().append("g").attr("class","tick"),D=R.select("line"),y=R.select("text");O=O.merge(O.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),R=R.merge(K),D=D.merge(K.append("line").attr("stroke","currentColor").attr(c+"2",u*a)),y=y.merge(K.append("text").attr("fill","currentColor").attr(c,u*v).attr("dy",t===te?"0em":t===ne?"0.71em":"0.32em")),d!==M&&(O=O.transition(d),R=R.transition(d),D=D.transition(d),y=y.transition(d),L=L.transition(d).attr("opacity",Le).attr("transform",function(S){return isFinite(S=N(S))?h(S+s):this.getAttribute("transform")}),K.attr("opacity",Le).attr("transform",function(S){var _=this.parentNode.__axis;return h((_&&isFinite(_=_(S))?_:N(S))+s)})),L.remove(),O.attr("d",t===ct||t===ee?o?"M"+u*o+","+w+"H"+s+"V"+k+"H"+u*o:"M"+s+","+w+"V"+k:o?"M"+w+","+u*o+"V"+s+"H"+k+"V"+u*o:"M"+w+","+s+"H"+k),R.attr("opacity",1).attr("transform",function(S){return h(N(S)+s)}),D.attr(c+"2",u*a),y.attr(c,u*v).text(g),M.filter(xr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ee?"start":t===ct?"end":"middle"),M.each(function(){this.__axis=N})}return f.scale=function(d){return arguments.length?(e=d,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),f):r&&r.slice()},f.tickFormat=function(d){return arguments.length?(i=d,f):i},f.tickSize=function(d){return arguments.length?(a=o=+d,f):a},f.tickSizeInner=function(d){return arguments.length?(a=+d,f):a},f.tickSizeOuter=function(d){return arguments.length?(o=+d,f):o},f.tickPadding=function(d){return arguments.length?(l=+d,f):l},f.offset=function(d){return arguments.length?(s=+d,f):s},f}function wr(t){return Fe(ne,t)}function br(t){return Fe(ct,t)}var Mr={value:()=>{}};function qe(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new St(n)}function St(t){this._=t}function kr(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}St.prototype=qe.prototype={constructor:St,on:function(t,e){var n=this._,r=kr(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=$r(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Ve(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ve(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new St(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function $r(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ve(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Mr,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var re="http://www.w3.org/1999/xhtml";const De={svg:"http://www.w3.org/2000/svg",xhtml:re,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Et(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),De.hasOwnProperty(e)?{space:De[e],local:t}:t}function Ar(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===re&&e.documentElement.namespaceURI===re?e.createElement(t):e.createElementNS(n,t)}}function Nr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Be(t){var e=Et(t);return(e.local?Nr:Ar)(e)}function Sr(){}function ie(t){return t==null?Sr:function(){return this.querySelector(t)}}function Er(t){typeof t!="function"&&(t=ie(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,l=r[i]=new Array(o),s,u,c=0;c<o;++c)(s=a[c])&&(u=t.call(s,s.__data__,c,a))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new C(r,this._parents)}function Ge(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Tr(){return[]}function Xe(t){return t==null?Tr:function(){return this.querySelectorAll(t)}}function Cr(t){return function(){return Ge(t.apply(this,arguments))}}function Rr(t){typeof t=="function"?t=Cr(t):t=Xe(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],l=o.length,s,u=0;u<l;++u)(s=o[u])&&(r.push(t.call(s,s.__data__,u,o)),i.push(s));return new C(r,i)}function Ke(t){return function(){return this.matches(t)}}function Ye(t){return function(e){return e.matches(t)}}var Pr=Array.prototype.find;function Or(t){return function(){return Pr.call(this.children,t)}}function zr(){return this.firstElementChild}function Ir(t){return this.select(t==null?zr:Or(typeof t=="function"?t:Ye(t)))}var Hr=Array.prototype.filter;function Lr(){return Array.from(this.children)}function Fr(t){return function(){return Hr.call(this.children,t)}}function qr(t){return this.selectAll(t==null?Lr:Fr(typeof t=="function"?t:Ye(t)))}function Vr(t){typeof t!="function"&&(t=Ke(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,l=r[i]=[],s,u=0;u<o;++u)(s=a[u])&&t.call(s,s.__data__,u,a)&&l.push(s);return new C(r,this._parents)}function Je(t){return new Array(t.length)}function Dr(){return new C(this._enter||this._groups.map(Je),this._parents)}function Tt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Tt.prototype={constructor:Tt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Br(t){return function(){return t}}function Gr(t,e,n,r,i,a){for(var o=0,l,s=e.length,u=a.length;o<u;++o)(l=e[o])?(l.__data__=a[o],r[o]=l):n[o]=new Tt(t,a[o]);for(;o<s;++o)(l=e[o])&&(i[o]=l)}function Xr(t,e,n,r,i,a,o){var l,s,u=new Map,c=e.length,h=a.length,f=new Array(c),d;for(l=0;l<c;++l)(s=e[l])&&(f[l]=d=o.call(s,s.__data__,l,e)+"",u.has(d)?i[l]=s:u.set(d,s));for(l=0;l<h;++l)d=o.call(t,a[l],l,a)+"",(s=u.get(d))?(r[l]=s,s.__data__=a[l],u.delete(d)):n[l]=new Tt(t,a[l]);for(l=0;l<c;++l)(s=e[l])&&u.get(f[l])===s&&(i[l]=s)}function Kr(t){return t.__data__}function Yr(t,e){if(!arguments.length)return Array.from(this,Kr);var n=e?Xr:Gr,r=this._parents,i=this._groups;typeof t!="function"&&(t=Br(t));for(var a=i.length,o=new Array(a),l=new Array(a),s=new Array(a),u=0;u<a;++u){var c=r[u],h=i[u],f=h.length,d=Jr(t.call(c,c&&c.__data__,u,r)),m=d.length,g=l[u]=new Array(m),v=o[u]=new Array(m),b=s[u]=new Array(f);n(c,h,g,v,b,d,e);for(var w=0,k=0,N,M;w<m;++w)if(N=g[w]){for(w>=k&&(k=w+1);!(M=v[k])&&++k<m;);N._next=M||null}}return o=new C(o,r),o._enter=l,o._exit=s,o}function Jr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ur(){return new C(this._exit||this._groups.map(Je),this._parents)}function Wr(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Zr(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),l=new Array(i),s=0;s<o;++s)for(var u=n[s],c=r[s],h=u.length,f=l[s]=new Array(h),d,m=0;m<h;++m)(d=u[m]||c[m])&&(f[m]=d);for(;s<i;++s)l[s]=n[s];return new C(l,this._parents)}function Qr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function jr(t){t||(t=ti);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],l=o.length,s=i[a]=new Array(l),u,c=0;c<l;++c)(u=o[c])&&(s[c]=u);s.sort(e)}return new C(i,this._parents).order()}function ti(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ei(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ni(){return Array.from(this)}function ri(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function ii(){let t=0;for(const e of this)++t;return t}function ai(){return!this.node()}function oi(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,l;a<o;++a)(l=i[a])&&t.call(l,l.__data__,a,i);return this}function si(t){return function(){this.removeAttribute(t)}}function li(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ui(t,e){return function(){this.setAttribute(t,e)}}function ci(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function fi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function hi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function di(t,e){var n=Et(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?li:si:typeof e=="function"?n.local?hi:fi:n.local?ci:ui)(n,e))}function Ue(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function pi(t){return function(){this.style.removeProperty(t)}}function gi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function mi(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function yi(t,e,n){return arguments.length>1?this.each((e==null?pi:typeof e=="function"?mi:gi)(t,e,n??"")):tt(this.node(),t)}function tt(t,e){return t.style.getPropertyValue(e)||Ue(t).getComputedStyle(t,null).getPropertyValue(e)}function _i(t){return function(){delete this[t]}}function vi(t,e){return function(){this[t]=e}}function xi(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function wi(t,e){return arguments.length>1?this.each((e==null?_i:typeof e=="function"?xi:vi)(t,e)):this.node()[t]}function We(t){return t.trim().split(/^|\s+/)}function ae(t){return t.classList||new Ze(t)}function Ze(t){this._node=t,this._names=We(t.getAttribute("class")||"")}Ze.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Qe(t,e){for(var n=ae(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function je(t,e){for(var n=ae(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function bi(t){return function(){Qe(this,t)}}function Mi(t){return function(){je(this,t)}}function ki(t,e){return function(){(e.apply(this,arguments)?Qe:je)(this,t)}}function $i(t,e){var n=We(t+"");if(arguments.length<2){for(var r=ae(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ki:e?bi:Mi)(n,e))}function Ai(){this.textContent=""}function Ni(t){return function(){this.textContent=t}}function Si(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ei(t){return arguments.length?this.each(t==null?Ai:(typeof t=="function"?Si:Ni)(t)):this.node().textContent}function Ti(){this.innerHTML=""}function Ci(t){return function(){this.innerHTML=t}}function Ri(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Pi(t){return arguments.length?this.each(t==null?Ti:(typeof t=="function"?Ri:Ci)(t)):this.node().innerHTML}function Oi(){this.nextSibling&&this.parentNode.appendChild(this)}function zi(){return this.each(Oi)}function Ii(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hi(){return this.each(Ii)}function Li(t){var e=typeof t=="function"?t:Be(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Fi(){return null}function qi(t,e){var n=typeof t=="function"?t:Be(t),r=e==null?Fi:typeof e=="function"?e:ie(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Vi(){var t=this.parentNode;t&&t.removeChild(this)}function Di(){return this.each(Vi)}function Bi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Gi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xi(t){return this.select(t?Gi:Bi)}function Ki(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Yi(t){return function(e){t.call(this,e,this.__data__)}}function Ji(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ui(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Wi(t,e,n){return function(){var r=this.__on,i,a=Yi(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Zi(t,e,n){var r=Ji(t+""),i,a=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(i=0,c=l[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(l=e?Wi:Ui,i=0;i<a;++i)this.each(l(r[i],e,n));return this}function tn(t,e,n){var r=Ue(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Qi(t,e){return function(){return tn(this,t,e)}}function ji(t,e){return function(){return tn(this,t,e.apply(this,arguments))}}function ta(t,e){return this.each((typeof e=="function"?ji:Qi)(t,e))}function*ea(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var oe=[null];function C(t,e){this._groups=t,this._parents=e}function ft(){return new C([[document.documentElement]],oe)}function na(){return this}C.prototype=ft.prototype={constructor:C,select:Er,selectAll:Rr,selectChild:Ir,selectChildren:qr,filter:Vr,data:Yr,enter:Dr,exit:Ur,join:Wr,merge:Zr,selection:na,order:Qr,sort:jr,call:ei,nodes:ni,node:ri,size:ii,empty:ai,each:oi,attr:di,style:yi,property:wi,classed:$i,text:Ei,html:Pi,raise:zi,lower:Hi,append:Li,insert:qi,remove:Di,clone:Xi,datum:Ki,on:Zi,dispatch:ta,[Symbol.iterator]:ea};function Ct(t){return typeof t=="string"?new C([[document.querySelector(t)]],[document.documentElement]):new C([[t]],oe)}function en(t){return typeof t=="string"?new C([document.querySelectorAll(t)],[document.documentElement]):new C([Ge(t)],oe)}function se(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function nn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ht(){}var dt=.7,Rt=1/dt,et="\\s*([+-]?\\d+)\\s*",pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",F="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ra=/^#([0-9a-f]{3,8})$/,ia=new RegExp(`^rgb\\(${et},${et},${et}\\)$`),aa=new RegExp(`^rgb\\(${F},${F},${F}\\)$`),oa=new RegExp(`^rgba\\(${et},${et},${et},${pt}\\)$`),sa=new RegExp(`^rgba\\(${F},${F},${F},${pt}\\)$`),la=new RegExp(`^hsl\\(${pt},${F},${F}\\)$`),ua=new RegExp(`^hsla\\(${pt},${F},${F},${pt}\\)$`),rn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};se(ht,Y,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:an,formatHex:an,formatHex8:ca,formatHsl:fa,formatRgb:on,toString:on});function an(){return this.rgb().formatHex()}function ca(){return this.rgb().formatHex8()}function fa(){return fn(this).formatHsl()}function on(){return this.rgb().formatRgb()}function Y(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ra.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?sn(e):n===3?new P(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Pt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Pt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ia.exec(t))?new P(e[1],e[2],e[3],1):(e=aa.exec(t))?new P(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=oa.exec(t))?Pt(e[1],e[2],e[3],e[4]):(e=sa.exec(t))?Pt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=la.exec(t))?cn(e[1],e[2]/100,e[3]/100,1):(e=ua.exec(t))?cn(e[1],e[2]/100,e[3]/100,e[4]):rn.hasOwnProperty(t)?sn(rn[t]):t==="transparent"?new P(NaN,NaN,NaN,0):null}function sn(t){return new P(t>>16&255,t>>8&255,t&255,1)}function Pt(t,e,n,r){return r<=0&&(t=e=n=NaN),new P(t,e,n,r)}function ha(t){return t instanceof ht||(t=Y(t)),t?(t=t.rgb(),new P(t.r,t.g,t.b,t.opacity)):new P}function le(t,e,n,r){return arguments.length===1?ha(t):new P(t,e,n,r??1)}function P(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}se(P,le,nn(ht,{brighter(t){return t=t==null?Rt:Math.pow(Rt,t),new P(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?dt:Math.pow(dt,t),new P(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new P(J(this.r),J(this.g),J(this.b),Ot(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ln,formatHex:ln,formatHex8:da,formatRgb:un,toString:un}));function ln(){return`#${U(this.r)}${U(this.g)}${U(this.b)}`}function da(){return`#${U(this.r)}${U(this.g)}${U(this.b)}${U((isNaN(this.opacity)?1:this.opacity)*255)}`}function un(){const t=Ot(this.opacity);return`${t===1?"rgb(":"rgba("}${J(this.r)}, ${J(this.g)}, ${J(this.b)}${t===1?")":`, ${t})`}`}function Ot(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function J(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function U(t){return t=J(t),(t<16?"0":"")+t.toString(16)}function cn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new z(t,e,n,r)}function fn(t){if(t instanceof z)return new z(t.h,t.s,t.l,t.opacity);if(t instanceof ht||(t=Y(t)),!t)return new z;if(t instanceof z)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-i,s=(a+i)/2;return l?(e===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-e)/l+2:o=(e-n)/l+4,l/=s<.5?a+i:2-a-i,o*=60):l=s>0&&s<1?0:o,new z(o,l,s,t.opacity)}function pa(t,e,n,r){return arguments.length===1?fn(t):new z(t,e,n,r??1)}function z(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}se(z,pa,nn(ht,{brighter(t){return t=t==null?Rt:Math.pow(Rt,t),new z(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?dt:Math.pow(dt,t),new z(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new P(ue(t>=240?t-240:t+120,i,r),ue(t,i,r),ue(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new z(hn(this.h),zt(this.s),zt(this.l),Ot(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ot(this.opacity);return`${t===1?"hsl(":"hsla("}${hn(this.h)}, ${zt(this.s)*100}%, ${zt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function hn(t){return t=(t||0)%360,t<0?t+360:t}function zt(t){return Math.max(0,Math.min(1,t||0))}function ue(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ce=t=>()=>t;function ga(t,e){return function(n){return t+n*e}}function ma(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ya(t){return(t=+t)==1?dn:function(e,n){return n-e?ma(e,n,t):ce(isNaN(e)?n:e)}}function dn(t,e){var n=e-t;return n?ga(t,n):ce(isNaN(t)?e:t)}const It=function t(e){var n=ya(e);function r(i,a){var o=n((i=le(i)).r,(a=le(a)).r),l=n(i.g,a.g),s=n(i.b,a.b),u=dn(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=l(c),i.b=s(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function _a(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function va(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function xa(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=de(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function wa(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function I(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ba(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=de(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,he=new RegExp(fe.source,"g");function Ma(t){return function(){return t}}function ka(t){return function(e){return t(e)+""}}function pn(t,e){var n=fe.lastIndex=he.lastIndex=0,r,i,a,o=-1,l=[],s=[];for(t=t+"",e=e+"";(r=fe.exec(t))&&(i=he.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,s.push({i:o,x:I(r,i)})),n=he.lastIndex;return n<e.length&&(a=e.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?s[0]?ka(s[0].x):Ma(e):(e=s.length,function(u){for(var c=0,h;c<e;++c)l[(h=s[c]).i]=h.x(u);return l.join("")})}function de(t,e){var n=typeof e,r;return e==null||n==="boolean"?ce(e):(n==="number"?I:n==="string"?(r=Y(e))?(e=r,It):pn:e instanceof Y?It:e instanceof Date?wa:va(e)?_a:Array.isArray(e)?xa:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ba:I)(t,e)}function $a(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var gn=180/Math.PI,pe={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mn(t,e,n,r,i,a){var o,l,s;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),t*r<e*n&&(t=-t,e=-e,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*gn,skewX:Math.atan(s)*gn,scaleX:o,scaleY:l}}var Ht;function Aa(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?pe:mn(e.a,e.b,e.c,e.d,e.e,e.f)}function Na(t){return t==null||(Ht||(Ht=document.createElementNS("http://www.w3.org/2000/svg","g")),Ht.setAttribute("transform",t),!(t=Ht.transform.baseVal.consolidate()))?pe:(t=t.matrix,mn(t.a,t.b,t.c,t.d,t.e,t.f))}function yn(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,c,h,f,d,m){if(u!==h||c!==f){var g=d.push("translate(",null,e,null,n);m.push({i:g-4,x:I(u,h)},{i:g-2,x:I(c,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function o(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:I(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function l(u,c,h,f){u!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:I(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function s(u,c,h,f,d,m){if(u!==h||c!==f){var g=d.push(i(d)+"scale(",null,",",null,")");m.push({i:g-4,x:I(u,h)},{i:g-2,x:I(c,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=t(u),c=t(c),a(u.translateX,u.translateY,c.translateX,c.translateY,h,f),o(u.rotate,c.rotate,h,f),l(u.skewX,c.skewX,h,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(d){for(var m=-1,g=f.length,v;++m<g;)h[(v=f[m]).i]=v.x(d);return h.join("")}}}var Sa=yn(Aa,"px, ","px)","deg)"),Ea=yn(Na,", ",")",")"),nt=0,gt=0,mt=0,_n=1e3,Lt,yt,Ft=0,W=0,qt=0,_t=typeof performance=="object"&&performance.now?performance:Date,vn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ge(){return W||(vn(Ta),W=_t.now()+qt)}function Ta(){W=0}function Vt(){this._call=this._time=this._next=null}Vt.prototype=xn.prototype={constructor:Vt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ge():+n)+(e==null?0:+e),!this._next&&yt!==this&&(yt?yt._next=this:Lt=this,yt=this),this._call=t,this._time=n,me()},stop:function(){this._call&&(this._call=null,this._time=1/0,me())}};function xn(t,e,n){var r=new Vt;return r.restart(t,e,n),r}function Ca(){ge(),++nt;for(var t=Lt,e;t;)(e=W-t._time)>=0&&t._call.call(void 0,e),t=t._next;--nt}function wn(){W=(Ft=_t.now())+qt,nt=gt=0;try{Ca()}finally{nt=0,Pa(),W=0}}function Ra(){var t=_t.now(),e=t-Ft;e>_n&&(qt-=e,Ft=t)}function Pa(){for(var t,e=Lt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Lt=n);yt=t,me(r)}function me(t){if(!nt){gt&&(gt=clearTimeout(gt));var e=t-W;e>24?(t<1/0&&(gt=setTimeout(wn,t-_t.now()-qt)),mt&&(mt=clearInterval(mt))):(mt||(Ft=_t.now(),mt=setInterval(Ra,_n)),nt=1,vn(wn))}}function bn(t,e,n){var r=new Vt;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Oa=qe("start","end","cancel","interrupt"),za=[],Mn=0,kn=1,ye=2,Dt=3,$n=4,_e=5,Bt=6;function Gt(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Ia(t,n,{name:e,index:r,group:i,on:Oa,tween:za,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Mn})}function ve(t,e){var n=H(t,e);if(n.state>Mn)throw new Error("too late; already scheduled");return n}function q(t,e){var n=H(t,e);if(n.state>Dt)throw new Error("too late; already running");return n}function H(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ia(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=xn(a,0,n.time);function a(u){n.state=kn,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,h,f,d;if(n.state!==kn)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Dt)return bn(o);d.state===$n?(d.state=Bt,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=Bt,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(bn(function(){n.state===Dt&&(n.state=$n,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=ye,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ye){for(n.state=Dt,i=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=_e,1),h=-1,f=i.length;++h<f;)i[h].call(t,c);n.state===_e&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){n.state=Bt,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Ha(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>ye&&r.state<_e,r.state=Bt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function La(t){return this.each(function(){Ha(this,t)})}function Fa(t,e){var n,r;return function(){var i=q(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function qa(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=q(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=l;break}s===u&&i.push(l)}a.tween=i}}function Va(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=H(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Fa:qa)(n,t,e))}function xe(t,e,n){var r=t._id;return t.each(function(){var i=q(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return H(i,r).value[e]}}function An(t,e){var n;return(typeof e=="number"?I:e instanceof Y?It:(n=Y(e))?(e=n,It):pn)(t,e)}function Da(t){return function(){this.removeAttribute(t)}}function Ba(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ga(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Xa(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Ka(t,e,n){var r,i,a;return function(){var o,l=n(this),s;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),s=l+"",o===s?null:o===r&&s===i?a:(i=s,a=e(r=o,l)))}}function Ya(t,e,n){var r,i,a;return function(){var o,l=n(this),s;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),s=l+"",o===s?null:o===r&&s===i?a:(i=s,a=e(r=o,l)))}}function Ja(t,e){var n=Et(t),r=n==="transform"?Ea:An;return this.attrTween(t,typeof e=="function"?(n.local?Ya:Ka)(n,r,xe(this,"attr."+t,e)):e==null?(n.local?Ba:Da)(n):(n.local?Xa:Ga)(n,r,e))}function Ua(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Wa(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Za(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Wa(t,a)),n}return i._value=e,i}function Qa(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Ua(t,a)),n}return i._value=e,i}function ja(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Et(t);return this.tween(n,(r.local?Za:Qa)(r,e))}function to(t,e){return function(){ve(this,t).delay=+e.apply(this,arguments)}}function eo(t,e){return e=+e,function(){ve(this,t).delay=e}}function no(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?to:eo)(e,t)):H(this.node(),e).delay}function ro(t,e){return function(){q(this,t).duration=+e.apply(this,arguments)}}function io(t,e){return e=+e,function(){q(this,t).duration=e}}function ao(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ro:io)(e,t)):H(this.node(),e).duration}function oo(t,e){if(typeof e!="function")throw new Error;return function(){q(this,t).ease=e}}function so(t){var e=this._id;return arguments.length?this.each(oo(e,t)):H(this.node(),e).ease}function lo(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;q(this,t).ease=n}}function uo(t){if(typeof t!="function")throw new Error;return this.each(lo(this._id,t))}function co(t){typeof t!="function"&&(t=Ke(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,l=r[i]=[],s,u=0;u<o;++u)(s=a[u])&&t.call(s,s.__data__,u,a)&&l.push(s);return new G(r,this._parents,this._name,this._id)}function fo(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var s=e[l],u=n[l],c=s.length,h=o[l]=new Array(c),f,d=0;d<c;++d)(f=s[d]||u[d])&&(h[d]=f);for(;l<r;++l)o[l]=e[l];return new G(o,this._parents,this._name,this._id)}function ho(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function po(t,e,n){var r,i,a=ho(e)?ve:q;return function(){var o=a(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function go(t,e){var n=this._id;return arguments.length<2?H(this.node(),n).on.on(t):this.each(po(n,t,e))}function mo(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function yo(){return this.on("end.remove",mo(this._id))}function _o(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ie(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var l=r[o],s=l.length,u=a[o]=new Array(s),c,h,f=0;f<s;++f)(c=l[f])&&(h=t.call(c,c.__data__,f,l))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,Gt(u[f],e,n,f,u,H(c,n)));return new G(a,this._parents,e,n)}function vo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Xe(t));for(var r=this._groups,i=r.length,a=[],o=[],l=0;l<i;++l)for(var s=r[l],u=s.length,c,h=0;h<u;++h)if(c=s[h]){for(var f=t.call(c,c.__data__,h,s),d,m=H(c,n),g=0,v=f.length;g<v;++g)(d=f[g])&&Gt(d,e,n,g,f,m);a.push(f),o.push(c)}return new G(a,o,e,n)}var xo=ft.prototype.constructor;function wo(){return new xo(this._groups,this._parents)}function bo(t,e){var n,r,i;return function(){var a=tt(this,t),o=(this.style.removeProperty(t),tt(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Nn(t){return function(){this.style.removeProperty(t)}}function Mo(t,e,n){var r,i=n+"",a;return function(){var o=tt(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function ko(t,e,n){var r,i,a;return function(){var o=tt(this,t),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(t),tt(this,t))),o===s?null:o===r&&s===i?a:(i=s,a=e(r=o,l))}}function $o(t,e){var n,r,i,a="style."+e,o="end."+a,l;return function(){var s=q(this,t),u=s.on,c=s.value[a]==null?l||(l=Nn(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),s.on=r}}function Ao(t,e,n){var r=(t+="")=="transform"?Sa:An;return e==null?this.styleTween(t,bo(t,r)).on("end.style."+t,Nn(t)):typeof e=="function"?this.styleTween(t,ko(t,r,xe(this,"style."+t,e))).each($o(this._id,t)):this.styleTween(t,Mo(t,r,e),n).on("end.style."+t,null)}function No(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function So(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&No(t,o,n)),r}return a._value=e,a}function Eo(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,So(t,e,n??""))}function To(t){return function(){this.textContent=t}}function Co(t){return function(){var e=t(this);this.textContent=e??""}}function Ro(t){return this.tween("text",typeof t=="function"?Co(xe(this,"text",t)):To(t==null?"":t+""))}function Po(t){return function(e){this.textContent=t.call(this,e)}}function Oo(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Po(i)),e}return r._value=t,r}function zo(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Oo(t))}function Io(){for(var t=this._name,e=this._id,n=Sn(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],l=o.length,s,u=0;u<l;++u)if(s=o[u]){var c=H(s,e);Gt(s,t,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new G(r,this._parents,t,n)}function Ho(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var l={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var u=q(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(s)),u.on=e}),i===0&&a()})}var Lo=0;function G(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Sn(){return++Lo}var X=ft.prototype;G.prototype={constructor:G,select:_o,selectAll:vo,selectChild:X.selectChild,selectChildren:X.selectChildren,filter:co,merge:fo,selection:wo,transition:Io,call:X.call,nodes:X.nodes,node:X.node,size:X.size,empty:X.empty,each:X.each,on:go,attr:Ja,attrTween:ja,style:Ao,styleTween:Eo,text:Ro,textTween:zo,remove:yo,tween:Va,delay:no,duration:ao,ease:so,easeVarying:uo,end:Ho,[Symbol.iterator]:X[Symbol.iterator]};function Fo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var qo={time:null,delay:0,duration:250,ease:Fo};function Vo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Do(t){var e,n;t instanceof G?(e=t._id,t=t._name):(e=Sn(),(n=qo).time=ge(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],l=o.length,s,u=0;u<l;++u)(s=o[u])&&Gt(s,t,e,u,o,n||Vo(s,e));return new G(r,this._parents,t,e)}ft.prototype.interrupt=La,ft.prototype.transition=Do;const we=Math.PI,be=2*we,Z=1e-6,Bo=be-Z;function En(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Go(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return En;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Xo{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?En:Go(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,s=r-e,u=i-n,c=o-e,h=l-n,f=c*c+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Z)if(!(Math.abs(h*s-u*c)>Z)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-o,m=i-l,g=s*s+u*u,v=d*d+m*m,b=Math.sqrt(g),w=Math.sqrt(f),k=a*Math.tan((we-Math.acos((g+f-v)/(2*b*w)))/2),N=k/w,M=k/b;Math.abs(N-1)>Z&&this._append`L${e+N*c},${n+N*h}`,this._append`A${a},${a},0,0,${+(h*d>c*m)},${this._x1=e+M*s},${this._y1=n+M*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),s=r*Math.sin(i),u=e+l,c=n+s,h=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Z||Math.abs(this._y1-c)>Z)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%be+be),f>Bo?this._append`A${r},${r},0,1,${h},${e-l},${n-s}A${r},${r},0,1,${h},${this._x1=u},${this._y1=c}`:f>Z&&this._append`A${r},${r},0,${+(f>=we)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ko(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Xt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function rt(t){return t=Xt(Math.abs(t)),t?t[1]:NaN}function Yo(t,e){return function(n,r){for(var i=n.length,a=[],o=0,l=t[0],s=0;i>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),a.push(n.substring(i-=l,i+l)),!((s+=l+1)>r));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Jo(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Uo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kt(t){if(!(e=Uo.exec(t)))throw new Error("invalid format: "+t);var e;return new Me({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Kt.prototype=Me.prototype;function Me(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Me.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Wo(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Tn;function Zo(t,e){var n=Xt(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Tn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Xt(t,Math.max(0,e+a-1))[0]}function Cn(t,e){var n=Xt(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Rn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ko,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Cn(t*100,e),r:Cn,s:Zo,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Pn(t){return t}var On=Array.prototype.map,zn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Qo(t){var e=t.grouping===void 0||t.thousands===void 0?Pn:Yo(On.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Pn:Jo(On.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",s=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Kt(h);var f=h.fill,d=h.align,m=h.sign,g=h.symbol,v=h.zero,b=h.width,w=h.comma,k=h.precision,N=h.trim,M=h.type;M==="n"?(w=!0,M="g"):Rn[M]||(k===void 0&&(k=12),N=!0,M="g"),(v||f==="0"&&d==="=")&&(v=!0,f="0",d="=");var O=g==="$"?n:g==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",R=g==="$"?r:/[%p]/.test(M)?o:"",L=Rn[M],K=/[defgprs%]/.test(M);k=k===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function D(y){var S=O,_=R,p,$,x;if(M==="c")_=L(y)+_,y="";else{y=+y;var A=y<0||1/y<0;if(y=isNaN(y)?s:L(Math.abs(y),k),N&&(y=Wo(y)),A&&+y==0&&m!=="+"&&(A=!1),S=(A?m==="("?m:l:m==="-"||m==="("?"":m)+S,_=(M==="s"?zn[8+Tn/3]:"")+_+(A&&m==="("?")":""),K){for(p=-1,$=y.length;++p<$;)if(x=y.charCodeAt(p),48>x||x>57){_=(x===46?i+y.slice(p+1):y.slice(p))+_,y=y.slice(0,p);break}}}w&&!v&&(y=e(y,1/0));var E=S.length+y.length+_.length,T=E<b?new Array(b-E+1).join(f):"";switch(w&&v&&(y=e(T+y,T.length?b-_.length:1/0),T=""),d){case"<":y=S+y+_+T;break;case"=":y=S+T+y+_;break;case"^":y=T.slice(0,E=T.length>>1)+S+y+_+T.slice(E);break;default:y=T+S+y+_;break}return a(y)}return D.toString=function(){return h+""},D}function c(h,f){var d=u((h=Kt(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(rt(f)/3)))*3,g=Math.pow(10,-m),v=zn[8+m/3];return function(b){return d(g*b)+v}}return{format:u,formatPrefix:c}}var Yt,In,Hn;jo({thousands:",",grouping:[3],currency:["$",""]});function jo(t){return Yt=Qo(t),In=Yt.format,Hn=Yt.formatPrefix,Yt}function ts(t){return Math.max(0,-rt(Math.abs(t)))}function es(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rt(e)/3)))*3-rt(Math.abs(t)))}function ns(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,rt(e)-rt(t))+1}function ke(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Ln=Symbol("implicit");function Fn(){var t=new Ie,e=[],n=[],r=Ln;function i(a){let o=t.get(a);if(o===void 0){if(r!==Ln)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Ie;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Fn(e,n).unknown(r)},ke.apply(i,arguments),i}function qn(){var t=Fn().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,l=!1,s=0,u=0,c=.5;delete t.unknown;function h(){var f=e().length,d=i<r,m=d?i:r,g=d?r:i;a=(g-m)/Math.max(1,f-s+u*2),l&&(a=Math.floor(a)),m+=(g-m-a*(f-s))*c,o=a*(1-s),l&&(m=Math.round(m),o=Math.round(o));var v=pr(f).map(function(b){return m+a*b});return n(d?v.reverse():v)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(s=Math.min(1,u=+f),h()):s},t.paddingInner=function(f){return arguments.length?(s=Math.min(1,f),h()):s},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),h()):c},t.copy=function(){return qn(e(),[r,i]).round(l).paddingInner(s).paddingOuter(u).align(c)},ke.apply(h(),arguments)}function rs(t){return function(){return t}}function is(t){return+t}var Vn=[0,1];function it(t){return t}function $e(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:rs(isNaN(e)?NaN:.5)}function as(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function os(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=$e(i,r),a=n(o,a)):(r=$e(r,i),a=n(a,o)),function(l){return a(r(l))}}function ss(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=$e(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(l){var s=ar(t,l,1,r)-1;return a[s](i[s](l))}}function ls(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function us(){var t=Vn,e=Vn,n=de,r,i,a,o=it,l,s,u;function c(){var f=Math.min(t.length,e.length);return o!==it&&(o=as(t[0],t[f-1])),l=f>2?ss:os,s=u=null,h}function h(f){return f==null||isNaN(f=+f)?a:(s||(s=l(t.map(r),e,n)))(r(o(f)))}return h.invert=function(f){return o(i((u||(u=l(e,t.map(r),I)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,is),c()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=$a,c()},h.clamp=function(f){return arguments.length?(o=f?!0:it,c()):o!==it},h.interpolate=function(f){return arguments.length?(n=f,c()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,d){return r=f,i=d,c()}}function cs(){return us()(it,it)}function fs(t,e,n,r){var i=dr(t,e,n),a;switch(r=Kt(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=es(i,o))&&(r.precision=a),Hn(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ns(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=ts(i))&&(r.precision=a-(r.type==="%")*2);break}}return In(r)}function hs(t){var e=t.domain;return t.ticks=function(n){var r=e();return hr(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return fs(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],l=r[a],s,u,c=10;for(l<o&&(u=o,o=l,l=u,u=i,i=a,a=u);c-- >0;){if(u=Qt(o,l,n),u===s)return r[i]=o,r[a]=l,e(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;s=u}return t},t}function Ae(){var t=cs();return t.copy=function(){return ls(t,Ae())},ke.apply(t,arguments),hs(t)}function at(t){return function(){return t}}function ds(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Xo(e)}function ps(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Dn(t){this._context=t}Dn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function gs(t){return new Dn(t)}function ms(t){return t[0]}function ys(t){return t[1]}function _s(t,e){var n=at(!0),r=null,i=gs,a=null,o=ds(l);t=typeof t=="function"?t:t===void 0?ms:at(t),e=typeof e=="function"?e:e===void 0?ys:at(e);function l(s){var u,c=(s=ps(s)).length,h,f=!1,d;for(r==null&&(a=i(d=o())),u=0;u<=c;++u)!(u<c&&n(h=s[u],u,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,u,s),+e(h,u,s));if(d)return a=null,d+""||null}return l.x=function(s){return arguments.length?(t=typeof s=="function"?s:at(+s),l):t},l.y=function(s){return arguments.length?(e=typeof s=="function"?s:at(+s),l):e},l.defined=function(s){return arguments.length?(n=typeof s=="function"?s:at(!!s),l):n},l.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),l):i},l.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),l):r},l}function vt(t,e,n){this.k=t,this.x=e,this.y=n}vt.prototype={constructor:vt,scale:function(t){return t===1?this:new vt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new vt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},vt.prototype;let ot=1;const vs=`
		<section id="intro">
			<h1 class="intro__hed">Intro</h1>
			<p class="intro__dek">
				Description
			</p>
		</section>

		<section id="scrolly">
			<figure>
				<p id="chart"></p>
			</figure>

			<article>
				<div class="step" data-step="1">
					<p>First caption</p>
				</div>
				<div class="step" data-step="2">
					<p>...second caption</p>
				</div>
				<div class="step" data-step="3">
					<p>...third caption</p>
				</div>
				<div class="step" data-step="4">
					<p>...fourth caption</p>
				</div>
			</article>
		</section>

		<section id="outro"></section>
    `,xs=`
	

		<section id="outro"></section>
		<section id="scrolly">
			<article>
				<div class="step" data-step="1">
					<p>Traditional Metrics</p>
					<p>Kanté might have a lower number of goals and assists but will excel in minutes played and key passes. He’s the engine of the team, covering ground and supporting both defense and attack.</p>
				</div>
				<div class="step" data-step="2">
					<p>Advanced Metrics</p>
					<p>His xG (expected goals) and xA(expected assists) values may not be as high as Mahrez or Vardy, but his tackles and interceptions will be vital.</p>
				</div>
			</article>

			<figure>
				<p id="kante"></p>
			</figure>
		</section>
	  

		<section id="outro"></section>
    `,ws=`
	

	<section id="outro"></section>
	
		
		<section id="intro">
			<p class="intro__dek">
				Using advanced analytics, we can quantify the value of individual players in ways that traditional metrics (such as goals and assists) can't fully capture.
				
			</p>
		</section>
		
	<section id="outro"></section>

		<section id="intro">
			<p class="intro__dek">For example:
				<ul><li>xG and xA provide deeper insights into a player's ability to create and finish scoring opportunities.</li>
				<li>Radar charts allow us to compare traditional football statistics alongside advanced metrics, helping to identify the key contributors to Leicester's success beyond just goal scorers.</li>
				</ul>
				</p>
				</section>
				
	<section id="outro"></section>

		<section id="intro">
				<p class="intro__dek">
				By comparing traditional metrics like height, weight, and goals with advanced analytics like xG(expected goals) and xA(expected average), we can see how Leicester City's star players—Vardy, Kanté, and Mahrez—contributed to their historic Premier League win. Data analytics not only helps identify standout performances but also helps clubs make informed decisions on tactics, recruitment, and player development.
				</p>

		</section>
		
	<section id="outro"></section>
	<section id="scrolly">
		<article>
			<div class="step" data-step="1">
				<p>Traditional Metrics</p>
				<p>Vardy stands out for his goals scored, assists, and minutes played. His height and weight are also typical for a fast and mobile forward.</p>
			</div>
			<div class="step" data-step="2">
				<p>Advanced Metrics</p>
				<p>His xG (expected goals) and xA (expected assists) will show how clinical his finishing is compared to what’s expected.</p>
			</div>
		</article>

		<figure>
			<p id="vardy"></p>
		</figure>
	</section>
  

	<section id="outro"></section>
`,bs=`
	

	<section id="outro"></section>
	<section id="scrolly">
		<article>
			<div class="step" data-step="1">
				<p>Traditional Metrics</p>
				<p>Maharez will excel in goals, assists, and dribbles, showcasing his creative and offensive qualities.</p>
			</div>
			<div class="step" data-step="2">
				<p>Advanced Metrics</p>
				<p>His xG and xA will highlight his involvement in creating and finishing chances, showcasing his technical prowess and efficiency.</p>
			</div>
		</article>

		<figure>
			<p id="maharez"></p>
		</figure>
	</section>
  

	<section id="outro"></section>
`;function Ms(){var t=Math.floor(window.innerHeight*.75);Gn.style("height",t+"px");var e=window.innerHeight/2,n=(window.innerHeight-e)/2;Bn.style("height",e+"px").style("top",n+"px")}function ks(t){const e=t.element.dataset.step;en(".step").classed("is-active",function(n,r){return r===t.index}),e>=2&&en(".bar").style("fill",(n,r)=>r===17?"#003090":"steelblue"),e>=3&&wt.selectAll(".label").text((n,r)=>r===17?n.value_eur:"")}function Ne(t){Object.entries(t).forEach(([e,n])=>{document.querySelectorAll(e).forEach(i=>{Object.entries(n).forEach(([a,o])=>{i.style[a]=o})})})}function Jt(){Se=Ct("main"),xt=Se.select("#scrolly"),Bn=xt.select("figure"),Ee=xt.select("article"),Gn=Ee.selectAll(".step");const t=er();Ms(),t.resize(),t.setup({step:"#scrolly article .step",offset:.33,debug:!1}).onStepEnter(ks),window.scrollTo(0,0)}const Ut=[{name:"Chelsea",value_eur:2395e4},{name:"Manchester City",value_eur:2075e4},{name:"Arsenal",value_eur:19075e3},{name:"Manchester United",value_eur:1806e4},{name:"Liverpool",value_eur:13925e3},{name:"Tottenham Hotspur",value_eur:11215e3},{name:"Everton",value_eur:9125e3},{name:"Stoke City",value_eur:6865e3},{name:"Southampton",value_eur:6823750},{name:"Swansea City",value_eur:656e4},{name:"Newcastle United",value_eur:6435e3},{name:"West Ham United",value_eur:6075e3},{name:"Aston Villa",value_eur:509e4},{name:"Sunderland",value_eur:48e5},{name:"West Bromwich Albion",value_eur:478e4},{name:"Crystal Palace",value_eur:4255e3},{name:"Watford",value_eur:3635e3},{name:"Leicester City",value_eur:3587500},{name:"Norwich City",value_eur:294e4},{name:"Bournemouth",value_eur:2843750}];document.getElementById("story").innerHTML=vs;var Se=Ct("main"),xt=Se.select("#scrolly"),Bn=xt.select("figure"),Ee=xt.select("article"),Gn=Ee.selectAll(".step");const V={top:20,right:30,bottom:40,left:150},Xn=800-V.left-V.right,Te=600-V.top-V.bottom,wt=Ct("#chart").append("svg").attr("width",Xn+V.left+V.right).attr("height",Te+V.top+V.bottom).append("g").attr("transform",`translate(${V.left},${V.top})`),Ce=Ae().domain([0,jt(Ut,t=>t.value_eur/1e6)]).range([0,Xn]),bt=qn().domain(Ut.map(t=>t.name)).range([0,Te]).padding(.1);wt.selectAll(".bar").data(Ut).enter().append("rect").attr("class","bar").attr("x",0).attr("y",t=>bt(t.name)).attr("width",t=>Ce(t.value_eur/1e6)).attr("height",bt.bandwidth()).style("fill","steelblue"),wt.append("g").attr("class","x-axis").attr("transform",`translate(0,${Te})`).call(wr(Ce)),wt.append("g").attr("class","y-axis").call(br(bt)),wt.selectAll(".label").data(Ut).enter().append("text").attr("class","label").attr("x",t=>Ce(t.value_eur/1e6)+5).attr("y",t=>bt(t.name)+bt.bandwidth()/2).attr("dy","0.35em").text(t=>"").style("fill","black").style("font-size","16px"),Jt();function Re(t,e,n){const r=[...new Set(t.map(g=>g.variable))],i=[...new Set(t.map(g=>g.player_name))],a=600,o=600,s=Math.min(a,o)/2-50,u=5,c=Ct(e).append("svg").attr("width",a).attr("height",o).append("g").attr("transform",`translate(${a/2}, ${o/2})`),h=Ae().domain([0,jt(t,g=>g.value)]).range([0,s]),f=2*Math.PI/r.length;for(let g=1;g<=u;g++)c.append("circle").attr("cx",0).attr("cy",0).attr("r",s/u*g).style("fill","none").style("stroke","#ccc");r.forEach((g,v)=>{const b=f*v-Math.PI/2,w=Math.cos(b)*s,k=Math.sin(b)*s;c.append("line").attr("x1",0).attr("y1",0).attr("x2",w).attr("y2",k).style("stroke","#ccc"),c.append("text").attr("x",w*1.1).attr("y",k*1.1).attr("text-anchor",w>0?"start":"end").style("font-size","12px").text(g)}),i.forEach(g=>{const v=t.filter(w=>w.player_name===g),b=r.map((w,k)=>{const N=v.find(L=>L.variable===w)||{value:0},M=f*k-Math.PI/2,O=Math.cos(M)*h(N.value),R=Math.sin(M)*h(N.value);return[O,R]});b.push(b[0]),c.append("path").attr("d",_s()(b)).attr("class","polygon").style("stroke",g==="N'Golo Kanté"?"blue":"red").style("fill",g==="N'Golo Kanté"?"blue":"red").style("fill-opacity",.1)}),t.forEach(g=>{const v=r.indexOf(g.variable)*f-Math.PI/2,b=Math.cos(v)*h(g.value),w=Math.sin(v)*h(g.value);c.append("circle").attr("cx",b).attr("cy",w).attr("r",4).attr("class","dot").style("fill",g.metric_type==="Traditional"?"red":"blue").style("stroke","#fff")});for(let g=1;g<=u;g++){const v=jt(t,w=>w.value)/u*g,b=s/u*g;c.append("circle").attr("cx",0).attr("cy",0).attr("r",b).style("fill","none").style("stroke","#ccc"),c.append("text").attr("x",0).attr("y",-b).attr("text-anchor","middle").style("font-size","12px").style("fill","#333").text(Math.round(v))}c.append("text").attr("x",0).attr("y",o/2-10).attr("text-anchor","middle").style("font-size","18px").style("font-weight","bold").text(n);const d=[{color:"red",label:"Traditional"},{color:"blue",label:"Advanced"}],m=c.append("g").attr("transform",`translate(${s-35}, -${s})`);d.forEach((g,v)=>{m.append("circle").attr("cx",10).attr("cy",v*20).attr("r",5).style("fill",g.color),m.append("text").attr("x",20).attr("y",v*20+5).text(g.label).style("font-size","12px").attr("alignment-baseline","middle").attr("fill","#333")})}const Pe={"#scrolly":{position:"relative",display:"flex",backgroundColor:"#f3f3f3",padding:"1rem"},"#scrolly > *":{flex:"1"},article:{position:"relative",padding:"0 1rem",maxWidth:"50rem"},figure:{position:"sticky",width:"100%",margin:"0",transform:"translate3d(0, 0, 0)",backgroundColor:"#8a8a8a",zIndex:"0"},"figure p":{textAlign:"center",padding:"1rem",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"8rem",fontWeight:"900",color:"#fff"},".step":{margin:"0 auto 2rem auto",backgroundColor:"#3b3b3b",color:"#fff"},".step:last-child":{marginBottom:"0"},".step.is-active":{backgroundColor:"goldenrod",color:"#3b3b3b"},".step p":{textAlign:"center",padding:"1rem",fontSize:"1.5rem"}};window.addEventListener("scroll",()=>{const t=window.innerHeight+window.scrollY,e=document.documentElement.scrollHeight;if(ot===1&&t>=e){ot=2,document.getElementById("story").innerHTML=ws,Ne(Pe),Re([{player_name:"Jamie Vardy",variable:"height",value:100,metric_type:"Advanced"},{player_name:"Jamie Vardy",variable:"weight",value:75,metric_type:"Advanced"},{player_name:"Jamie Vardy",variable:"goals",value:100,metric_type:"Traditional"},{player_name:"Jamie Vardy",variable:"assists",value:60,metric_type:"Traditional"},{player_name:"Jamie Vardy",variable:"minutes_played",value:90,metric_type:"Advanced"},{player_name:"Jamie Vardy",variable:"xG",value:100,metric_type:"Advanced"},{player_name:"Jamie Vardy",variable:"xA",value:42,metric_type:"Advanced"},{player_name:"Jamie Vardy",variable:"shots",value:92,metric_type:"Traditional"},{player_name:"Jamie Vardy",variable:"key_passes",value:50,metric_type:"Traditional"},{player_name:"Jamie Vardy",variable:"dribbles",value:31,metric_type:"Traditional"}],"#vardy","Jamie Vardy: Key Performance Metrics"),Jt();return}if(ot===2&&t>=e){ot=3,document.getElementById("story").innerHTML=xs,Ne(Pe),Re([{player_name:"N'Golo Kanté",variable:"height",value:98,metric_type:"Advanced"},{player_name:"N'Golo Kanté",variable:"weight",value:68,metric_type:"Advanced"},{player_name:"N'Golo Kanté",variable:"goals",value:20,metric_type:"Traditional"},{player_name:"N'Golo Kanté",variable:"assists",value:35,metric_type:"Traditional"},{player_name:"N'Golo Kanté",variable:"minutes_played",value:100,metric_type:"Advanced"},{player_name:"N'Golo Kanté",variable:"xG",value:30,metric_type:"Advanced"},{player_name:"N'Golo Kanté",variable:"xA",value:25,metric_type:"Advanced"},{player_name:"N'Golo Kanté",variable:"shots",value:25,metric_type:"Traditional"},{player_name:"N'Golo Kanté",variable:"key_passes",value:30,metric_type:"Traditional"},{player_name:"N'Golo Kanté",variable:"dribbles",value:100,metric_type:"Traditional"}],"#kante","N’Golo Kanté: Key Performance Metrics"),Jt();return}if(ot===3&&t>=e){ot=4,document.getElementById("story").innerHTML=bs,Ne(Pe),Re([{player_name:"Riyad Mahrez",variable:"height",value:100,metric_type:"Advanced"},{player_name:"Riyad Mahrez",variable:"weight",value:68,metric_type:"Advanced"},{player_name:"Riyad Mahrez",variable:"goals",value:80,metric_type:"Traditional"},{player_name:"Riyad Mahrez",variable:"assists",value:100,metric_type:"Traditional"},{player_name:"Riyad Mahrez",variable:"minutes_played",value:90,metric_type:"Advanced"},{player_name:"Riyad Mahrez",variable:"xG",value:90,metric_type:"Advanced"},{player_name:"Riyad Mahrez",variable:"xA",value:63,metric_type:"Advanced"},{player_name:"Riyad Mahrez",variable:"shots",value:92,metric_type:"Traditional"},{player_name:"Riyad Mahrez",variable:"key_passes",value:100,metric_type:"Traditional"},{player_name:"Riyad Mahrez",variable:"dribbles",value:37,metric_type:"Traditional"}],"#maharez","Riyad Maharez: Key Performance Metrics"),Jt();return}})})();
