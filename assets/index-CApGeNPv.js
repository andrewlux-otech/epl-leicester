(function(){"use strict";function tr(t,e=document){return typeof t=="string"?Array.from(e.querySelectorAll(t)):t instanceof Element?[t]:t instanceof NodeList?Array.from(t):t instanceof Array?t:[]}function er(t){const e=document.createElement("div");e.className=`scrollama__debug-step ${t}`,e.style.position="fixed",e.style.left="0",e.style.width="100%",e.style.zIndex="9999",e.style.borderTop="2px solid black",e.style.borderBottom="2px solid black";const n=document.createElement("p");return n.style.position="absolute",n.style.left="0",n.style.height="1px",n.style.width="100%",n.style.borderTop="1px dashed black",e.appendChild(n),document.body.appendChild(e),e}function nr({id:t,step:e,marginTop:n}){const{index:r,height:i}=e,a=`scrollama__debug-step--${t}-${r}`;let s=document.querySelector(`.${a}`);s||(s=er(a)),s.style.top=`${n*-1}px`,s.style.height=`${i}px`,s.querySelector("p").style.top=`${i/2}px`}function rr(){const t="abcdefghijklmnopqrstuvwxyz",e=Date.now(),n=[];for(let r=0;r<6;r+=1){const i=t[Math.floor(Math.random()*t.length)];n.push(i)}return`${n.join("")}${e}`}function At(t){console.error(`scrollama error: ${t}`)}function dt(t){return+t.getAttribute("data-scrollama-index")}function ir(t,e){const n=Math.ceil(t/e),r=[],i=1/n;for(let a=0;a<n+1;a+=1)r.push(a*i);return r}function jt(t){if(typeof t=="string"&&t.indexOf("px")>0){const e=+t.replace("px","");return isNaN(e)?(err("offset value must be in 'px' format. Fallback to 0.5."),{format:"percent",value:.5}):{format:"pixels",value:e}}else if(typeof t=="number"||!isNaN(+t))return t>1&&err("offset value is greater than 1. Fallback to 1."),t<0&&err("offset value is lower than 0. Fallback to 0."),{format:"percent",value:Math.min(Math.max(0,t),1)};return null}function ar(t){t.forEach(e=>e.node.setAttribute("data-scrollama-index",e.index))}function sr(t){const{top:e}=t.getBoundingClientRect(),n=window.pageYOffset,r=document.body.clientTop||0;return e+n-r}let nt,St,D;function ze(t){const e=t?t.scrollTop:window.pageYOffset;nt!==e&&(nt=e,nt>St?D="down":nt<St&&(D="up"),St=nt)}function or(t){nt=0,St=0,document.addEventListener("scroll",()=>ze(t))}function lr(){let t={},e=rr(),n=[],r,i,a,s=0,o=!1,l=!1,c=!1,u=!1,h=[];function f(){t={stepEnter:()=>{},stepExit:()=>{},stepProgress:()=>{}},h=[]}function d(g){g&&!o&&N(),!g&&o&&M(),o=g}function y(g,A){const b=dt(g),S=n[b];A!==void 0&&(S.progress=A);const E={element:g,index:b,progress:A,direction:D};S.state==="enter"&&t.stepProgress(E)}function p(g,A=!0){const b=dt(g),S=n[b],E={element:g,index:b,direction:D};S.direction=D,S.state="enter",h[b]||t.stepEnter(E),u&&(h[b]=!0)}function m(g,A=!0){const b=dt(g),S=n[b];if(!S.state)return!1;const E={element:g,index:b,direction:D};l&&(D==="down"&&S.progress<1?y(g,1):D==="up"&&S.progress>0&&y(g,0)),S.direction=D,S.state="exit",t.stepExit(E)}function w([g]){const A=dt(g.target),b=n[A],S=g.target.offsetHeight;S!==b.height&&(b.height=S,$(b),F(b),R(b))}function _([g]){ze(i);const{isIntersecting:A,target:b}=g;A?p(b):m(b)}function k([g]){const A=dt(g.target),b=n[A],{isIntersecting:S,intersectionRatio:E,target:T}=g;S&&b.state==="enter"&&y(T,E)}function $({observers:g}){Object.keys(g).map(A=>{g[A].disconnect()})}function M(){n.forEach($)}function R(g){const A=new ResizeObserver(w);A.observe(g.node),g.observers.resize=A}function C(){n.forEach(R)}function F(g){const A=window.innerHeight,b=g.offset||r,S=b.format==="pixels"?1:A,E=b.value*S,T=g.height/2-E,ft=g.height/2-(A-E),ht={rootMargin:`${T}px 0px ${ft}px 0px`,threshold:.5,root:a},jn=new IntersectionObserver(_,ht);jn.observe(g.node),g.observers.step=jn,c&&nr({id:e,step:g,marginTop:T,marginBottom:ft})}function U(){n.forEach(F)}function K(g){const A=window.innerHeight,b=g.offset||r,S=b.format==="pixels"?1:A,E=b.value*S,T=-E+g.height,ft=E-A,Mt=`${T}px 0px ${ft}px 0px`,Qt=ir(g.height,s),et={rootMargin:Mt,threshold:Qt},ht=new IntersectionObserver(k,et);ht.observe(g.node),g.observers.progress=ht}function v(){n.forEach(K)}function N(){M(),C(),U(),l&&v()}const x={};return x.setup=({step:g,parent:A,offset:b=.5,threshold:S=4,progress:E=!1,once:T=!1,debug:ft=!1,container:Mt=void 0,root:Qt=null})=>(or(Mt),n=tr(g,A).map((et,ht)=>({index:ht,direction:void 0,height:et.offsetHeight,node:et,observers:{},offset:jt(et.dataset.offset),top:sr(et),progress:0,state:void 0})),n.length?(l=E,u=T,c=ft,s=Math.max(1,+S),r=jt(b),i=Mt,a=Qt,f(),ar(n),d(!0),x):(At("no step elements"),x)),x.enable=()=>(d(!0),x),x.disable=()=>(d(!1),x),x.destroy=()=>(d(!1),f(),x),x.resize=()=>(N(),x),x.offset=g=>g==null?r.value:(r=jt(g),N(),x),x.onStepEnter=g=>(typeof g=="function"?t.stepEnter=g:At("onStepEnter requires a function"),x),x.onStepExit=g=>(typeof g=="function"?t.stepExit=g:At("onStepExit requires a function"),x),x.onStepProgress=g=>(typeof g=="function"?t.stepProgress=g:At("onStepProgress requires a function"),x),x}function $t(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function cr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Le(t){let e,n,r;t.length!==2?(e=$t,n=(o,l)=>$t(t(o),l),r=(o,l)=>t(o)-l):(e=t===$t||t===cr?t:ur,n=t,r=t);function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(o[h],l)<0?c=h+1:u=h}while(c<u)}return c}function a(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(o[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function s(o,l,c=0,u=o.length){const h=i(o,l,c,u-1);return h>c&&r(o[h-1],l)>-r(o[h],l)?h-1:h}return{left:i,center:s,right:a}}function ur(){return 0}function fr(t){return t===null?NaN:+t}const hr=Le($t).right;Le(fr).center;class Re extends Map{constructor(e,n=gr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Ie(this,e))}has(e){return super.has(Ie(this,e))}set(e,n){return super.set(dr(this,e),n)}delete(e){return super.delete(pr(this,e))}}function Ie({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function dr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function pr({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function gr(t){return t!==null&&typeof t=="object"?t.valueOf():t}const yr=Math.sqrt(50),mr=Math.sqrt(10),vr=Math.sqrt(2);function Nt(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=yr?10:a>=mr?5:a>=vr?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?Nt(t,e,n*2):[o,l,c]}function xr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Nt(e,t,n):Nt(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function te(t,e,n){return e=+e,t=+t,n=+n,Nt(t,e,n)[2]}function wr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?te(e,t,n):te(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function qe(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function _r(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function br(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function kr(t){return t}var ee=1,ne=2,re=3,pt=4,Ge=1e-6;function Mr(t){return"translate("+t+",0)"}function Ar(t){return"translate(0,"+t+")"}function Sr(t){return e=>+t(e)}function $r(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Nr(){return!this.__axis}function Oe(t,e){var n=[],r=null,i=null,a=6,s=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===ee||t===pt?-1:1,u=t===pt||t===ne?"x":"y",h=t===ee||t===re?Mr:Ar;function f(d){var y=r??(e.ticks?e.ticks.apply(e,n):e.domain()),p=i??(e.tickFormat?e.tickFormat.apply(e,n):kr),m=Math.max(a,0)+o,w=e.range(),_=+w[0]+l,k=+w[w.length-1]+l,$=(e.bandwidth?$r:Sr)(e.copy(),l),M=d.selection?d.selection():d,R=M.selectAll(".domain").data([null]),C=M.selectAll(".tick").data(y,e).order(),F=C.exit(),U=C.enter().append("g").attr("class","tick"),K=C.select("line"),v=C.select("text");R=R.merge(R.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),C=C.merge(U),K=K.merge(U.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),v=v.merge(U.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",t===ee?"0em":t===re?"0.71em":"0.32em")),d!==M&&(R=R.transition(d),C=C.transition(d),K=K.transition(d),v=v.transition(d),F=F.transition(d).attr("opacity",Ge).attr("transform",function(N){return isFinite(N=$(N))?h(N+l):this.getAttribute("transform")}),U.attr("opacity",Ge).attr("transform",function(N){var x=this.parentNode.__axis;return h((x&&isFinite(x=x(N))?x:$(N))+l)})),F.remove(),R.attr("d",t===pt||t===ne?s?"M"+c*s+","+_+"H"+l+"V"+k+"H"+c*s:"M"+l+","+_+"V"+k:s?"M"+_+","+c*s+"V"+l+"H"+k+"V"+c*s:"M"+_+","+l+"H"+k),C.attr("opacity",1).attr("transform",function(N){return h($(N)+l)}),K.attr(u+"2",c*a),v.attr(u,c*m).text(p),M.filter(Nr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ne?"start":t===pt?"end":"middle"),M.each(function(){this.__axis=$})}return f.scale=function(d){return arguments.length?(e=d,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),f):r&&r.slice()},f.tickFormat=function(d){return arguments.length?(i=d,f):i},f.tickSize=function(d){return arguments.length?(a=s=+d,f):a},f.tickSizeInner=function(d){return arguments.length?(a=+d,f):a},f.tickSizeOuter=function(d){return arguments.length?(s=+d,f):s},f.tickPadding=function(d){return arguments.length?(o=+d,f):o},f.offset=function(d){return arguments.length?(l=+d,f):l},f}function Fe(t){return Oe(re,t)}function He(t){return Oe(pt,t)}var Er={value:()=>{}};function Ve(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Et(n)}function Et(t){this._=t}function Tr(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Et.prototype=Ve.prototype={constructor:Et,on:function(t,e){var n=this._,r=Tr(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=Pr(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=Be(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Be(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Et(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Pr(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Be(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Er,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ie="http://www.w3.org/1999/xhtml";const Ke={svg:"http://www.w3.org/2000/svg",xhtml:ie,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ke.hasOwnProperty(e)?{space:Ke[e],local:t}:t}function Cr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ie&&e.documentElement.namespaceURI===ie?e.createElement(t):e.createElementNS(n,t)}}function zr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function De(t){var e=Tt(t);return(e.local?zr:Cr)(e)}function Lr(){}function ae(t){return t==null?Lr:function(){return this.querySelector(t)}}function Rr(t){typeof t!="function"&&(t=ae(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),l,c,u=0;u<s;++u)(l=a[u])&&(c=t.call(l,l.__data__,u,a))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new P(r,this._parents)}function Ye(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ir(){return[]}function Xe(t){return t==null?Ir:function(){return this.querySelectorAll(t)}}function qr(t){return function(){return Ye(t.apply(this,arguments))}}function Gr(t){typeof t=="function"?t=qr(t):t=Xe(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],o=s.length,l,c=0;c<o;++c)(l=s[c])&&(r.push(t.call(l,l.__data__,c,s)),i.push(l));return new P(r,i)}function Je(t){return function(){return this.matches(t)}}function Ue(t){return function(e){return e.matches(t)}}var Or=Array.prototype.find;function Fr(t){return function(){return Or.call(this.children,t)}}function Hr(){return this.firstElementChild}function Vr(t){return this.select(t==null?Hr:Fr(typeof t=="function"?t:Ue(t)))}var Br=Array.prototype.filter;function Kr(){return Array.from(this.children)}function Dr(t){return function(){return Br.call(this.children,t)}}function Yr(t){return this.selectAll(t==null?Kr:Dr(typeof t=="function"?t:Ue(t)))}function Xr(t){typeof t!="function"&&(t=Je(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,c=0;c<s;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&o.push(l);return new P(r,this._parents)}function We(t){return new Array(t.length)}function Jr(){return new P(this._enter||this._groups.map(We),this._parents)}function Pt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Pt.prototype={constructor:Pt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ur(t){return function(){return t}}function Wr(t,e,n,r,i,a){for(var s=0,o,l=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new Pt(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function Zr(t,e,n,r,i,a,s){var o,l,c=new Map,u=e.length,h=a.length,f=new Array(u),d;for(o=0;o<u;++o)(l=e[o])&&(f[o]=d=s.call(l,l.__data__,o,e)+"",c.has(d)?i[o]=l:c.set(d,l));for(o=0;o<h;++o)d=s.call(t,a[o],o,a)+"",(l=c.get(d))?(r[o]=l,l.__data__=a[o],c.delete(d)):n[o]=new Pt(t,a[o]);for(o=0;o<u;++o)(l=e[o])&&c.get(f[o])===l&&(i[o]=l)}function Qr(t){return t.__data__}function jr(t,e){if(!arguments.length)return Array.from(this,Qr);var n=e?Zr:Wr,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ur(t));for(var a=i.length,s=new Array(a),o=new Array(a),l=new Array(a),c=0;c<a;++c){var u=r[c],h=i[c],f=h.length,d=ti(t.call(u,u&&u.__data__,c,r)),y=d.length,p=o[c]=new Array(y),m=s[c]=new Array(y),w=l[c]=new Array(f);n(u,h,p,m,w,d,e);for(var _=0,k=0,$,M;_<y;++_)if($=p[_]){for(_>=k&&(k=_+1);!(M=m[k])&&++k<y;);$._next=M||null}}return s=new P(s,r),s._enter=o,s._exit=l,s}function ti(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ei(){return new P(this._exit||this._groups.map(We),this._parents)}function ni(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function ri(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),l=0;l<s;++l)for(var c=n[l],u=r[l],h=c.length,f=o[l]=new Array(h),d,y=0;y<h;++y)(d=c[y]||u[y])&&(f[y]=d);for(;l<i;++l)o[l]=n[l];return new P(o,this._parents)}function ii(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function ai(t){t||(t=si);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,l=i[a]=new Array(o),c,u=0;u<o;++u)(c=s[u])&&(l[u]=c);l.sort(e)}return new P(i,this._parents).order()}function si(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function oi(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function li(){return Array.from(this)}function ci(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function ui(){let t=0;for(const e of this)++t;return t}function fi(){return!this.node()}function hi(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function di(t){return function(){this.removeAttribute(t)}}function pi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gi(t,e){return function(){this.setAttribute(t,e)}}function yi(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function mi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function vi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function xi(t,e){var n=Tt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?pi:di:typeof e=="function"?n.local?vi:mi:n.local?yi:gi)(n,e))}function Ze(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function wi(t){return function(){this.style.removeProperty(t)}}function _i(t,e,n){return function(){this.style.setProperty(t,e,n)}}function bi(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ki(t,e,n){return arguments.length>1?this.each((e==null?wi:typeof e=="function"?bi:_i)(t,e,n??"")):rt(this.node(),t)}function rt(t,e){return t.style.getPropertyValue(e)||Ze(t).getComputedStyle(t,null).getPropertyValue(e)}function Mi(t){return function(){delete this[t]}}function Ai(t,e){return function(){this[t]=e}}function Si(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function $i(t,e){return arguments.length>1?this.each((e==null?Mi:typeof e=="function"?Si:Ai)(t,e)):this.node()[t]}function Qe(t){return t.trim().split(/^|\s+/)}function se(t){return t.classList||new je(t)}function je(t){this._node=t,this._names=Qe(t.getAttribute("class")||"")}je.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function tn(t,e){for(var n=se(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function en(t,e){for(var n=se(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ni(t){return function(){tn(this,t)}}function Ei(t){return function(){en(this,t)}}function Ti(t,e){return function(){(e.apply(this,arguments)?tn:en)(this,t)}}function Pi(t,e){var n=Qe(t+"");if(arguments.length<2){for(var r=se(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ti:e?Ni:Ei)(n,e))}function Ci(){this.textContent=""}function zi(t){return function(){this.textContent=t}}function Li(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ri(t){return arguments.length?this.each(t==null?Ci:(typeof t=="function"?Li:zi)(t)):this.node().textContent}function Ii(){this.innerHTML=""}function qi(t){return function(){this.innerHTML=t}}function Gi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Oi(t){return arguments.length?this.each(t==null?Ii:(typeof t=="function"?Gi:qi)(t)):this.node().innerHTML}function Fi(){this.nextSibling&&this.parentNode.appendChild(this)}function Hi(){return this.each(Fi)}function Vi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bi(){return this.each(Vi)}function Ki(t){var e=typeof t=="function"?t:De(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Di(){return null}function Yi(t,e){var n=typeof t=="function"?t:De(t),r=e==null?Di:typeof e=="function"?e:ae(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Xi(){var t=this.parentNode;t&&t.removeChild(this)}function Ji(){return this.each(Xi)}function Ui(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Wi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Zi(t){return this.select(t?Wi:Ui)}function Qi(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ji(t){return function(e){t.call(this,e,this.__data__)}}function ta(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ea(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function na(t,e,n){return function(){var r=this.__on,i,a=ji(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function ra(t,e,n){var r=ta(t+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<a;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(o=e?na:ea,i=0;i<a;++i)this.each(o(r[i],e,n));return this}function nn(t,e,n){var r=Ze(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ia(t,e){return function(){return nn(this,t,e)}}function aa(t,e){return function(){return nn(this,t,e.apply(this,arguments))}}function sa(t,e){return this.each((typeof e=="function"?aa:ia)(t,e))}function*oa(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var oe=[null];function P(t,e){this._groups=t,this._parents=e}function gt(){return new P([[document.documentElement]],oe)}function la(){return this}P.prototype=gt.prototype={constructor:P,select:Rr,selectAll:Gr,selectChild:Vr,selectChildren:Yr,filter:Xr,data:jr,enter:Jr,exit:ei,join:ni,merge:ri,selection:la,order:ii,sort:ai,call:oi,nodes:li,node:ci,size:ui,empty:fi,each:hi,attr:xi,style:ki,property:$i,classed:Pi,text:Ri,html:Oi,raise:Hi,lower:Bi,append:Ki,insert:Yi,remove:Ji,clone:Zi,datum:Qi,on:ra,dispatch:sa,[Symbol.iterator]:oa};function L(t){return typeof t=="string"?new P([[document.querySelector(t)]],[document.documentElement]):new P([[t]],oe)}function it(t){return typeof t=="string"?new P([document.querySelectorAll(t)],[document.documentElement]):new P([Ye(t)],oe)}function le(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function rn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function yt(){}var mt=.7,Ct=1/mt,at="\\s*([+-]?\\d+)\\s*",vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",H="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ca=/^#([0-9a-f]{3,8})$/,ua=new RegExp(`^rgb\\(${at},${at},${at}\\)$`),fa=new RegExp(`^rgb\\(${H},${H},${H}\\)$`),ha=new RegExp(`^rgba\\(${at},${at},${at},${vt}\\)$`),da=new RegExp(`^rgba\\(${H},${H},${H},${vt}\\)$`),pa=new RegExp(`^hsl\\(${vt},${H},${H}\\)$`),ga=new RegExp(`^hsla\\(${vt},${H},${H},${vt}\\)$`),an={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};le(yt,W,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:sn,formatHex:sn,formatHex8:ya,formatHsl:ma,formatRgb:on,toString:on});function sn(){return this.rgb().formatHex()}function ya(){return this.rgb().formatHex8()}function ma(){return hn(this).formatHsl()}function on(){return this.rgb().formatRgb()}function W(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ca.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ln(e):n===3?new z(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?zt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?zt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ua.exec(t))?new z(e[1],e[2],e[3],1):(e=fa.exec(t))?new z(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ha.exec(t))?zt(e[1],e[2],e[3],e[4]):(e=da.exec(t))?zt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=pa.exec(t))?fn(e[1],e[2]/100,e[3]/100,1):(e=ga.exec(t))?fn(e[1],e[2]/100,e[3]/100,e[4]):an.hasOwnProperty(t)?ln(an[t]):t==="transparent"?new z(NaN,NaN,NaN,0):null}function ln(t){return new z(t>>16&255,t>>8&255,t&255,1)}function zt(t,e,n,r){return r<=0&&(t=e=n=NaN),new z(t,e,n,r)}function va(t){return t instanceof yt||(t=W(t)),t?(t=t.rgb(),new z(t.r,t.g,t.b,t.opacity)):new z}function ce(t,e,n,r){return arguments.length===1?va(t):new z(t,e,n,r??1)}function z(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}le(z,ce,rn(yt,{brighter(t){return t=t==null?Ct:Math.pow(Ct,t),new z(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?mt:Math.pow(mt,t),new z(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new z(Z(this.r),Z(this.g),Z(this.b),Lt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cn,formatHex:cn,formatHex8:xa,formatRgb:un,toString:un}));function cn(){return`#${Q(this.r)}${Q(this.g)}${Q(this.b)}`}function xa(){return`#${Q(this.r)}${Q(this.g)}${Q(this.b)}${Q((isNaN(this.opacity)?1:this.opacity)*255)}`}function un(){const t=Lt(this.opacity);return`${t===1?"rgb(":"rgba("}${Z(this.r)}, ${Z(this.g)}, ${Z(this.b)}${t===1?")":`, ${t})`}`}function Lt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Z(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Q(t){return t=Z(t),(t<16?"0":"")+t.toString(16)}function fn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new q(t,e,n,r)}function hn(t){if(t instanceof q)return new q(t.h,t.s,t.l,t.opacity);if(t instanceof yt||(t=W(t)),!t)return new q;if(t instanceof q)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new q(s,o,l,t.opacity)}function wa(t,e,n,r){return arguments.length===1?hn(t):new q(t,e,n,r??1)}function q(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}le(q,wa,rn(yt,{brighter(t){return t=t==null?Ct:Math.pow(Ct,t),new q(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?mt:Math.pow(mt,t),new q(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new z(ue(t>=240?t-240:t+120,i,r),ue(t,i,r),ue(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new q(dn(this.h),Rt(this.s),Rt(this.l),Lt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Lt(this.opacity);return`${t===1?"hsl(":"hsla("}${dn(this.h)}, ${Rt(this.s)*100}%, ${Rt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function dn(t){return t=(t||0)%360,t<0?t+360:t}function Rt(t){return Math.max(0,Math.min(1,t||0))}function ue(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const fe=t=>()=>t;function _a(t,e){return function(n){return t+n*e}}function ba(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ka(t){return(t=+t)==1?pn:function(e,n){return n-e?ba(e,n,t):fe(isNaN(e)?n:e)}}function pn(t,e){var n=e-t;return n?_a(t,n):fe(isNaN(t)?e:t)}const It=function t(e){var n=ka(e);function r(i,a){var s=n((i=ce(i)).r,(a=ce(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),c=pn(i.opacity,a.opacity);return function(u){return i.r=s(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function Ma(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Aa(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Sa(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=pe(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function $a(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function G(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Na(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=pe(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var he=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,de=new RegExp(he.source,"g");function Ea(t){return function(){return t}}function Ta(t){return function(e){return t(e)+""}}function gn(t,e){var n=he.lastIndex=de.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=he.exec(t))&&(i=de.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:G(r,i)})),n=de.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Ta(l[0].x):Ea(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)o[(h=l[u]).i]=h.x(c);return o.join("")})}function pe(t,e){var n=typeof e,r;return e==null||n==="boolean"?fe(e):(n==="number"?G:n==="string"?(r=W(e))?(e=r,It):gn:e instanceof W?It:e instanceof Date?$a:Aa(e)?Ma:Array.isArray(e)?Sa:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Na:G)(t,e)}function Pa(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var yn=180/Math.PI,ge={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mn(t,e,n,r,i,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*yn,skewX:Math.atan(l)*yn,scaleX:s,scaleY:o}}var qt;function Ca(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ge:mn(e.a,e.b,e.c,e.d,e.e,e.f)}function za(t){return t==null||(qt||(qt=document.createElementNS("http://www.w3.org/2000/svg","g")),qt.setAttribute("transform",t),!(t=qt.transform.baseVal.consolidate()))?ge:(t=t.matrix,mn(t.a,t.b,t.c,t.d,t.e,t.f))}function vn(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,u,h,f,d,y){if(c!==h||u!==f){var p=d.push("translate(",null,e,null,n);y.push({i:p-4,x:G(c,h)},{i:p-2,x:G(u,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function s(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:G(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function o(c,u,h,f){c!==u?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:G(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,f,d,y){if(c!==h||u!==f){var p=d.push(i(d)+"scale(",null,",",null,")");y.push({i:p-4,x:G(c,h)},{i:p-2,x:G(u,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=t(c),u=t(u),a(c.translateX,c.translateY,u.translateX,u.translateY,h,f),s(c.rotate,u.rotate,h,f),o(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var y=-1,p=f.length,m;++y<p;)h[(m=f[y]).i]=m.x(d);return h.join("")}}}var La=vn(Ca,"px, ","px)","deg)"),Ra=vn(za,", ",")",")"),st=0,xt=0,wt=0,xn=1e3,Gt,_t,Ot=0,j=0,Ft=0,bt=typeof performance=="object"&&performance.now?performance:Date,wn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ye(){return j||(wn(Ia),j=bt.now()+Ft)}function Ia(){j=0}function Ht(){this._call=this._time=this._next=null}Ht.prototype=_n.prototype={constructor:Ht,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ye():+n)+(e==null?0:+e),!this._next&&_t!==this&&(_t?_t._next=this:Gt=this,_t=this),this._call=t,this._time=n,me()},stop:function(){this._call&&(this._call=null,this._time=1/0,me())}};function _n(t,e,n){var r=new Ht;return r.restart(t,e,n),r}function qa(){ye(),++st;for(var t=Gt,e;t;)(e=j-t._time)>=0&&t._call.call(void 0,e),t=t._next;--st}function bn(){j=(Ot=bt.now())+Ft,st=xt=0;try{qa()}finally{st=0,Oa(),j=0}}function Ga(){var t=bt.now(),e=t-Ot;e>xn&&(Ft-=e,Ot=t)}function Oa(){for(var t,e=Gt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Gt=n);_t=t,me(r)}function me(t){if(!st){xt&&(xt=clearTimeout(xt));var e=t-j;e>24?(t<1/0&&(xt=setTimeout(bn,t-bt.now()-Ft)),wt&&(wt=clearInterval(wt))):(wt||(Ot=bt.now(),wt=setInterval(Ga,xn)),st=1,wn(bn))}}function kn(t,e,n){var r=new Ht;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Fa=Ve("start","end","cancel","interrupt"),Ha=[],Mn=0,An=1,ve=2,Vt=3,Sn=4,xe=5,Bt=6;function Kt(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Va(t,n,{name:e,index:r,group:i,on:Fa,tween:Ha,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Mn})}function we(t,e){var n=O(t,e);if(n.state>Mn)throw new Error("too late; already scheduled");return n}function V(t,e){var n=O(t,e);if(n.state>Vt)throw new Error("too late; already running");return n}function O(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Va(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=_n(a,0,n.time);function a(c){n.state=An,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,h,f,d;if(n.state!==An)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Vt)return kn(s);d.state===Sn?(d.state=Bt,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=Bt,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(kn(function(){n.state===Vt&&(n.state=Sn,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=ve,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ve){for(n.state=Vt,i=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=xe,1),h=-1,f=i.length;++h<f;)i[h].call(t,u);n.state===xe&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Bt,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Ba(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>ve&&r.state<xe,r.state=Bt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function Ka(t){return this.each(function(){Ba(this,t)})}function Da(t,e){var n,r;return function(){var i=V(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Ya(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=V(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=o;break}l===c&&i.push(o)}a.tween=i}}function Xa(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=O(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Da:Ya)(n,t,e))}function _e(t,e,n){var r=t._id;return t.each(function(){var i=V(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return O(i,r).value[e]}}function $n(t,e){var n;return(typeof e=="number"?G:e instanceof W?It:(n=W(e))?(e=n,It):gn)(t,e)}function Ja(t){return function(){this.removeAttribute(t)}}function Ua(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wa(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function Za(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function Qa(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function ja(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function ts(t,e){var n=Tt(t),r=n==="transform"?Ra:$n;return this.attrTween(t,typeof e=="function"?(n.local?ja:Qa)(n,r,_e(this,"attr."+t,e)):e==null?(n.local?Ua:Ja)(n):(n.local?Za:Wa)(n,r,e))}function es(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ns(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function rs(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&ns(t,a)),n}return i._value=e,i}function is(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&es(t,a)),n}return i._value=e,i}function as(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Tt(t);return this.tween(n,(r.local?rs:is)(r,e))}function ss(t,e){return function(){we(this,t).delay=+e.apply(this,arguments)}}function os(t,e){return e=+e,function(){we(this,t).delay=e}}function ls(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ss:os)(e,t)):O(this.node(),e).delay}function cs(t,e){return function(){V(this,t).duration=+e.apply(this,arguments)}}function us(t,e){return e=+e,function(){V(this,t).duration=e}}function fs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?cs:us)(e,t)):O(this.node(),e).duration}function hs(t,e){if(typeof e!="function")throw new Error;return function(){V(this,t).ease=e}}function ds(t){var e=this._id;return arguments.length?this.each(hs(e,t)):O(this.node(),e).ease}function ps(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;V(this,t).ease=n}}function gs(t){if(typeof t!="function")throw new Error;return this.each(ps(this._id,t))}function ys(t){typeof t!="function"&&(t=Je(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,c=0;c<s;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&o.push(l);return new Y(r,this._parents,this._name,this._id)}function ms(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var l=e[o],c=n[o],u=l.length,h=s[o]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;o<r;++o)s[o]=e[o];return new Y(s,this._parents,this._name,this._id)}function vs(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function xs(t,e,n){var r,i,a=vs(e)?we:V;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function ws(t,e){var n=this._id;return arguments.length<2?O(this.node(),n).on.on(t):this.each(xs(n,t,e))}function _s(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function bs(){return this.on("end.remove",_s(this._id))}function ks(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ae(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],l=o.length,c=a[s]=new Array(l),u,h,f=0;f<l;++f)(u=o[f])&&(h=t.call(u,u.__data__,f,o))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,Kt(c[f],e,n,f,c,O(u,n)));return new Y(a,this._parents,e,n)}function Ms(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Xe(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var l=r[o],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=t.call(u,u.__data__,h,l),d,y=O(u,n),p=0,m=f.length;p<m;++p)(d=f[p])&&Kt(d,e,n,p,f,y);a.push(f),s.push(u)}return new Y(a,s,e,n)}var As=gt.prototype.constructor;function Ss(){return new As(this._groups,this._parents)}function $s(t,e){var n,r,i;return function(){var a=rt(this,t),s=(this.style.removeProperty(t),rt(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function Nn(t){return function(){this.style.removeProperty(t)}}function Ns(t,e,n){var r,i=n+"",a;return function(){var s=rt(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function Es(t,e,n){var r,i,a;return function(){var s=rt(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),rt(this,t))),s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o))}}function Ts(t,e){var n,r,i,a="style."+e,s="end."+a,o;return function(){var l=V(this,t),c=l.on,u=l.value[a]==null?o||(o=Nn(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}function Ps(t,e,n){var r=(t+="")=="transform"?La:$n;return e==null?this.styleTween(t,$s(t,r)).on("end.style."+t,Nn(t)):typeof e=="function"?this.styleTween(t,Es(t,r,_e(this,"style."+t,e))).each(Ts(this._id,t)):this.styleTween(t,Ns(t,r,e),n).on("end.style."+t,null)}function Cs(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function zs(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Cs(t,s,n)),r}return a._value=e,a}function Ls(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,zs(t,e,n??""))}function Rs(t){return function(){this.textContent=t}}function Is(t){return function(){var e=t(this);this.textContent=e??""}}function qs(t){return this.tween("text",typeof t=="function"?Is(_e(this,"text",t)):Rs(t==null?"":t+""))}function Gs(t){return function(e){this.textContent=t.call(this,e)}}function Os(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Gs(i)),e}return r._value=t,r}function Fs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Os(t))}function Hs(){for(var t=this._name,e=this._id,n=En(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,c=0;c<o;++c)if(l=s[c]){var u=O(l,e);Kt(l,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Y(r,this._parents,t,n)}function Vs(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},l={value:function(){--i===0&&a()}};n.each(function(){var c=V(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e}),i===0&&a()})}var Bs=0;function Y(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function En(){return++Bs}var X=gt.prototype;Y.prototype={constructor:Y,select:ks,selectAll:Ms,selectChild:X.selectChild,selectChildren:X.selectChildren,filter:ys,merge:ms,selection:Ss,transition:Hs,call:X.call,nodes:X.nodes,node:X.node,size:X.size,empty:X.empty,each:X.each,on:ws,attr:ts,attrTween:as,style:Ps,styleTween:Ls,text:qs,textTween:Fs,remove:bs,tween:Xa,delay:ls,duration:fs,ease:ds,easeVarying:gs,end:Vs,[Symbol.iterator]:X[Symbol.iterator]};function Ks(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ds={time:null,delay:0,duration:250,ease:Ks};function Ys(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Xs(t){var e,n;t instanceof Y?(e=t._id,t=t._name):(e=En(),(n=Ds).time=ye(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,c=0;c<o;++c)(l=s[c])&&Kt(l,t,e,c,s,n||Ys(l,e));return new Y(r,this._parents,t,e)}gt.prototype.interrupt=Ka,gt.prototype.transition=Xs;const be=Math.PI,ke=2*be,tt=1e-6,Js=ke-tt;function Tn(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Us(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Tn;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Ws{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Tn:Us(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,c=i-n,u=s-e,h=o-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>tt)if(!(Math.abs(h*l-c*u)>tt)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-s,y=i-o,p=l*l+c*c,m=d*d+y*y,w=Math.sqrt(p),_=Math.sqrt(f),k=a*Math.tan((be-Math.acos((p+f-m)/(2*w*_)))/2),$=k/_,M=k/w;Math.abs($-1)>tt&&this._append`L${e+$*u},${n+$*h}`,this._append`A${a},${a},0,0,${+(h*d>u*y)},${this._x1=e+M*l},${this._y1=n+M*c}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,u=n+l,h=1^s,f=s?i-a:a-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>tt||Math.abs(this._y1-u)>tt)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%ke+ke),f>Js?this._append`A${r},${r},0,1,${h},${e-o},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=u}`:f>tt&&this._append`A${r},${r},0,${+(f>=be)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Zs(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Dt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ot(t){return t=Dt(Math.abs(t)),t?t[1]:NaN}function Qs(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function js(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var to=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yt(t){if(!(e=to.exec(t)))throw new Error("invalid format: "+t);var e;return new Me({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yt.prototype=Me.prototype;function Me(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Me.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eo(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Pn;function no(t,e){var n=Dt(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Pn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Dt(t,Math.max(0,e+a-1))[0]}function Cn(t,e){var n=Dt(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const zn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Zs,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Cn(t*100,e),r:Cn,s:no,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ln(t){return t}var Rn=Array.prototype.map,In=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ro(t){var e=t.grouping===void 0||t.thousands===void 0?Ln:Qs(Rn.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Ln:js(Rn.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=Yt(h);var f=h.fill,d=h.align,y=h.sign,p=h.symbol,m=h.zero,w=h.width,_=h.comma,k=h.precision,$=h.trim,M=h.type;M==="n"?(_=!0,M="g"):zn[M]||(k===void 0&&(k=12),$=!0,M="g"),(m||f==="0"&&d==="=")&&(m=!0,f="0",d="=");var R=p==="$"?n:p==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",C=p==="$"?r:/[%p]/.test(M)?s:"",F=zn[M],U=/[defgprs%]/.test(M);k=k===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function K(v){var N=R,x=C,g,A,b;if(M==="c")x=F(v)+x,v="";else{v=+v;var S=v<0||1/v<0;if(v=isNaN(v)?l:F(Math.abs(v),k),$&&(v=eo(v)),S&&+v==0&&y!=="+"&&(S=!1),N=(S?y==="("?y:o:y==="-"||y==="("?"":y)+N,x=(M==="s"?In[8+Pn/3]:"")+x+(S&&y==="("?")":""),U){for(g=-1,A=v.length;++g<A;)if(b=v.charCodeAt(g),48>b||b>57){x=(b===46?i+v.slice(g+1):v.slice(g))+x,v=v.slice(0,g);break}}}_&&!m&&(v=e(v,1/0));var E=N.length+v.length+x.length,T=E<w?new Array(w-E+1).join(f):"";switch(_&&m&&(v=e(T+v,T.length?w-x.length:1/0),T=""),d){case"<":v=N+v+x+T;break;case"=":v=N+T+v+x;break;case"^":v=T.slice(0,E=T.length>>1)+N+v+x+T.slice(E);break;default:v=T+N+v+x;break}return a(v)}return K.toString=function(){return h+""},K}function u(h,f){var d=c((h=Yt(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(ot(f)/3)))*3,p=Math.pow(10,-y),m=In[8+y/3];return function(w){return d(p*w)+m}}return{format:c,formatPrefix:u}}var Xt,qn,Gn;io({thousands:",",grouping:[3],currency:["$",""]});function io(t){return Xt=ro(t),qn=Xt.format,Gn=Xt.formatPrefix,Xt}function ao(t){return Math.max(0,-ot(Math.abs(t)))}function so(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ot(e)/3)))*3-ot(Math.abs(t)))}function oo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ot(e)-ot(t))+1}function Ae(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const On=Symbol("implicit");function Fn(){var t=new Re,e=[],n=[],r=On;function i(a){let s=t.get(a);if(s===void 0){if(r!==On)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Re;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Fn(e,n).unknown(r)},Ae.apply(i,arguments),i}function Se(){var t=Fn().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,c=0,u=.5;delete t.unknown;function h(){var f=e().length,d=i<r,y=d?i:r,p=d?r:i;a=(p-y)/Math.max(1,f-l+c*2),o&&(a=Math.floor(a)),y+=(p-y-a*(f-l))*u,s=a*(1-l),o&&(y=Math.round(y),s=Math.round(s));var m=br(f).map(function(w){return y+a*w});return n(d?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(f){return arguments.length?(o=!!f,h()):o},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},t.copy=function(){return Se(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},Ae.apply(h(),arguments)}function Hn(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Hn(e())},t}function lo(){return Hn(Se.apply(null,arguments).paddingInner(1))}function co(t){return function(){return t}}function uo(t){return+t}var Vn=[0,1];function lt(t){return t}function $e(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:co(isNaN(e)?NaN:.5)}function fo(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function ho(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=$e(i,r),a=n(s,a)):(r=$e(r,i),a=n(a,s)),function(o){return a(r(o))}}function po(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=$e(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=hr(t,o,1,r)-1;return a[l](i[l](o))}}function go(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function yo(){var t=Vn,e=Vn,n=pe,r,i,a,s=lt,o,l,c;function u(){var f=Math.min(t.length,e.length);return s!==lt&&(s=fo(t[0],t[f-1])),o=f>2?po:ho,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?a:(l||(l=o(t.map(r),e,n)))(r(s(f)))}return h.invert=function(f){return s(i((c||(c=o(e,t.map(r),G)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,uo),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=Pa,u()},h.clamp=function(f){return arguments.length?(s=f?!0:lt,u()):s!==lt},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,d){return r=f,i=d,u()}}function mo(){return yo()(lt,lt)}function vo(t,e,n,r){var i=wr(t,e,n),a;switch(r=Yt(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=so(i,s))&&(r.precision=a),Gn(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=oo(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=ao(i))&&(r.precision=a-(r.type==="%")*2);break}}return qn(r)}function xo(t){var e=t.domain;return t.ticks=function(n){var r=e();return xr(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return vo(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,c,u=10;for(o<s&&(c=s,s=o,o=c,c=i,i=a,a=c);u-- >0;){if(c=te(s,o,n),c===l)return r[i]=s,r[a]=o,e(r);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function Jt(){var t=mo();return t.copy=function(){return go(t,Jt())},Ae.apply(t,arguments),xo(t)}function ct(t){return function(){return t}}function wo(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Ws(e)}function _o(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Bn(t){this._context=t}Bn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function bo(t){return new Bn(t)}function ko(t){return t[0]}function Mo(t){return t[1]}function Kn(t,e){var n=ct(!0),r=null,i=bo,a=null,s=wo(o);t=typeof t=="function"?t:t===void 0?ko:ct(t),e=typeof e=="function"?e:e===void 0?Mo:ct(e);function o(l){var c,u=(l=_o(l)).length,h,f=!1,d;for(r==null&&(a=i(d=s())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,c,l),+e(h,c,l));if(d)return a=null,d+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:ct(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:ct(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ct(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}function Dn(t){return t<0?-1:1}function Yn(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(Dn(a)+Dn(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function Xn(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ne(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function Ut(t){this._context=t}Ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ne(this,this._t0,Xn(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ne(this,Xn(this,n=Yn(this,t,e)),n);break;default:Ne(this,this._t0,n=Yn(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},Object.create(Ut.prototype).point=function(t,e){Ut.prototype.point.call(this,e,t)};function Ao(t){return new Ut(t)}function kt(t,e,n){this.k=t,this.x=e,this.y=n}kt.prototype={constructor:kt,scale:function(t){return t===1?this:new kt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new kt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},kt.prototype;let B=1;const So=`
<div class="parallax-container">
    <div id="parallax-bg" style="background-image: url('leicester.JPG');"></div>
</div>
<div class="parallax-container">
    <div id="parallax-bg-2" style="background-image: url('champions.JPG');"></div>
</div>

<h1 style="text-align: center; color: white; font-size: 96px;">5000 - 1</h1>
<h2 style="text-align: center; color: white; font-size: 72px;">Leicester City's Fairytale</h2>

<section style="height: 70vh;"></section>
    <section id="scrolly">
        <article>
           <div class="step" data-step="1">
            <div  id="players">
                    <img src="vardy.WEBP" width="400px" />
                    <img src="kante.WEBP" width="400px" />
                    <img src="maharez.WEBP" width="400px" />
                    </div>
            </div>
            <div class="step" data-step="2" style="max-width: 40rem;">
        <p style="background-color: black; border-radius: 20px;"><strong>Leicester City's 2015/16 fairytale</strong> defied conventional soccer wisdom. While other teams dominated possession, Leicester relied on a counter-attacking strategy to win the title.</p>
        <p style="background-color: black; border-radius: 20px;"><strong>One of the greatest underdog tales in sports history</strong> is Leicester City's surprising victory in the English Premier League season of 2015–16. The team was given <strong>5000-to-1 odds</strong> to win the championship at the beginning of the season. Leicester City surprised everyone by winning the league and doing so in a way that went against accepted soccer measurements and conventions.</p>
        <p style="background-color: black; border-radius: 20px;"><strong>Ball possession</strong> is valued highly in soccer, according to conventional knowledge, and teams that dominate possession are frequently thought to have a higher chance of winning. Leicester City, however, reversed this notion. They averaged just <strong>43% possession</strong>, one of the lowest among the league's champions in recent memory. In contrast, other elite clubs dominated games with prolonged stretches of possession, often surpassing <strong>55%</strong>.</p>
        </div>
        <div class="step" data-step="3" style="max-width: 40rem;">
        <p style="background-color: black; border-radius: 20px;"><strong>Their success was based on their counter-attacking strategy.</strong> Leicester enticed their opponents into overcommitting by giving up possession and playing compact defense, then quickly responded. Key players like <strong>Jamie Vardy</strong> and <strong>Riyad Mahrez</strong> played a crucial role in carrying out this plan; Vardy frequently converted clinical opportunities that Mahrez's ingenuity and vision generated. In addition to being effective, this strategy was devastatingly so.</p>
        <p style="background-color: black; border-radius: 20px;">Furthermore, Leicester benefited from a unique confluence of circumstances, including a team free of injuries for the majority of the season, exceptional performances by up-and-coming talent like <strong>N'Golo Kanté</strong>, and the inability of established powerhouses like Manchester United, Arsenal, and Chelsea to remain consistent. Leicester's tenacity and camaraderie became legendary under manager <strong>Claudio Ranieri</strong>'s leadership.</p>
        </div>
         
        </article>
    </section>

    <section style="height: 100vh;"></section>
`,$o=`


<section id="outro"></section>

    
<section id="intro">
<div">
    <p>
        Using <strong>advanced analytics</strong>, we can quantify the value of individual players in ways that traditional metrics—such as <strong>goals</strong> and <strong>assists</strong>—can’t fully capture. By looking beyond surface-level statistics, we gain a deeper understanding of a player’s true impact on the game.
    </p>
    </div>
</section>

<section id="outro"></section>

<section id="intro">

<div>
    <p><strong>For example:</strong></p>
    <ul>
        <li><strong>xG (expected goals)</strong> and <strong>xA (expected assists)</strong> provide deeper insights into a player’s ability to <strong>create</strong> and <strong>finish scoring opportunities</strong>.</li>
        <li><strong>Radar charts</strong> allow us to compare traditional football statistics alongside advanced metrics, helping to identify the <strong>key contributors</strong> to Leicester’s success beyond just goal scorers.</li>
    </ul>
    </div>
</section>

<section id="outro"></section>

<section id="intro">

<div>
    <p>
        By comparing traditional metrics—like <strong>height</strong>, <strong>weight</strong>, and <strong>goals</strong>—with advanced analytics like <strong>xG (expected goals)</strong> and <strong>xA (expected assists)</strong>, we can see how Leicester City’s star players—<strong>Vardy</strong>, <strong>Kanté</strong>, and <strong>Mahrez</strong>—contributed to their historic Premier League win. 
        <br><br>
        <strong>Data analytics</strong> not only helps identify standout performances but also enables clubs to make <strong>informed decisions</strong> on tactics, recruitment, and player development, giving them a competitive edge in modern football.
    </p>
    </div>
</section>

    
<section id="outro"></section>
<section id="scrolly">
    <article>
<div class="step" data-step="1">
    <p><strong>Vardy: Traditional Metrics</strong></p>
    <p>Vardy stands out for his <strong>goals scored</strong>, <strong>assists</strong>, and <strong>minutes played</strong>. His height and weight are also typical for a fast and mobile forward.</p>
</div>

<div class="step" data-step="2">
    <p><strong>Vardy: Advanced Metrics</strong></p>
    <p>His <strong>xG (expected goals)</strong> and <strong>xA (expected assists)</strong> will show how clinical his finishing is compared to what’s expected.</p>
</div>

<div class="step" data-step="3">
    <p><strong>Kanté: Traditional Metrics</strong></p>
    <p>Kanté might have a lower number of <strong>goals</strong> and <strong>assists</strong>, but he will excel in <strong>minutes played</strong> and <strong>key passes</strong>. He’s the engine of the team, covering ground and supporting both defense and attack.</p>
</div>

<div class="step" data-step="4">
    <p><strong>Kanté: Advanced Metrics</strong></p>
    <p>His <strong>xG (expected goals)</strong> and <strong>xA (expected assists)</strong> values may not be as high as Mahrez or Vardy, but his <strong>tackles</strong> and <strong>interceptions</strong> will be vital.</p>
</div>

<div class="step" data-step="5">
    <p><strong>Mahrez: Traditional Metrics</strong></p>
    <p>Mahrez will excel in <strong>goals</strong>, <strong>assists</strong>, and <strong>dribbles</strong>, showcasing his creative and offensive qualities.</p>
</div>

<div class="step" data-step="6">
    <p><strong>Mahrez: Advanced Metrics</strong></p>
    <p>His <strong>xG</strong> and <strong>xA</strong> will highlight his involvement in creating and finishing chances, showcasing his technical prowess and efficiency.</p>
</div>

    </article>

    <figure>
        <p id="vardy"></p>
        <img id="profile" />
    </figure>
</section>


<section id="outro"></section>
`;function No(){var t=Math.floor(window.innerHeight*.75);Wn.style("height",t+"px");var e=window.innerHeight/2,n=(window.innerHeight-e)/2;Wt==null||Wt.style("height",e+"px").style("top",n+"px")}let I;function Jn(t){Object.entries(t).forEach(([e,n])=>{document.querySelectorAll(e).forEach(i=>{Object.entries(n).forEach(([a,s])=>{i.style[a]=s})})})}function Eo(){const t=window.scrollY;To.style.transform=`translateY(${t*.3}px)`,Ee.style.transform=`translateY(${t*.5}px)`,Ee.style.marginTop=`${1300-t/3}px`}window.addEventListener("scroll",Eo);function ut({onStepProgress:t=()=>{},onStepEnter:e=()=>{},onStepExit:n=()=>{}}={}){Te=L("main"),Pe=Te.select("#scrolly"),Wt=Pe.select("figure"),Un=Pe.select("article"),Wn=Un.selectAll(".step");const r=lr();No(),r.resize(),r.setup({step:"#scrolly article .step",offset:.33,debug:!1,progress:!0}).onStepEnter(e).onStepExit(n).onStepProgress(t),window.scrollTo(0,0)}document.getElementById("story").innerHTML=So,document.querySelectorAll(".step").forEach(t=>t.style.height="auto !important");let To=document.getElementById("parallax-bg"),Ee=document.getElementById("parallax-bg-2");Ee.style.marginTop="1300px";var Te=L("main"),Pe,Wt,Un,Wn=Te.selectAll(".section");ut();function J(t,e,n){const r=[...new Set(t.map(p=>p.variable))],i=[...new Set(t.map(p=>p.player_name))],a=600,s=600,l=Math.min(a,s)/2-50,c=5,u=L(e).html("").append("svg").attr("width",a).attr("height",s).append("g").attr("transform",`translate(${a/2}, ${s/2})`),h=Jt().domain([0,100]).range([0,l]),f=2*Math.PI/r.length;for(let p=1;p<=c;p++)u.append("circle").attr("cx",0).attr("cy",0).attr("r",l/c*p).style("fill","none").style("stroke","#ccc");r.forEach((p,m)=>{const w=f*m-Math.PI/2,_=Math.cos(w)*l,k=Math.sin(w)*l;u.append("line").attr("x1",0).attr("y1",0).attr("x2",_).attr("y2",k).style("stroke","#ccc"),u.append("text").attr("x",_*1.1).attr("y",k*1.1).attr("text-anchor",_>0?"start":"end").style("font-size","12px").text(p)}),i.forEach(p=>{const m=t.filter(_=>_.player_name===p),w=r.map((_,k)=>{const $=m.find(F=>F.variable===_)||{value:0},M=f*k-Math.PI/2,R=Math.cos(M)*h($.value),C=Math.sin(M)*h($.value);return[R,C]});w.push(w[0]),u.append("path").attr("d",Kn()(w)).attr("class","polygon").style("stroke",p==="N'Golo Kanté"?"blue":"red").style("fill",p==="N'Golo Kanté"?"blue":"red").style("fill-opacity",.1)}),t.forEach(p=>{const m=r.indexOf(p.variable)*f-Math.PI/2,w=Math.cos(m)*h(p.value),_=Math.sin(m)*h(p.value);u.append("circle").attr("cx",w).attr("cy",_).attr("r",4).attr("class","dot").style("fill",p.metric_type==="Traditional"?"red":"blue").style("stroke","#fff")});for(let p=1;p<=c;p++){const m=100/c*p,w=l/c*p;u.append("circle").attr("cx",0).attr("cy",0).attr("r",w).style("fill","none").style("stroke","#ccc"),u.append("text").attr("x",0).attr("y",-w).attr("text-anchor","middle").style("font-size","12px").style("fill","#333").text(Math.round(m/20)*20)}u.append("text").attr("x",0).attr("y",s/2-10).attr("text-anchor","middle").style("font-size","18px").style("font-weight","bold").text(n);const d=[{color:"red",label:"Traditional"},{color:"blue",label:"Advanced"}],y=u.append("g").attr("transform",`translate(${l-35}, -${l})`);d.forEach((p,m)=>{y.append("circle").attr("cx",10).attr("cy",m*20).attr("r",5).style("fill",p.color),y.append("text").attr("x",20).attr("y",m*20+5).text(p.label).style("font-size","12px").attr("alignment-baseline","middle").attr("fill","#333")})}const Zn={"#scrolly":{position:"relative",display:"flex",padding:"1rem"},"#scrolly > *":{flex:"1"},article:{position:"relative",padding:"0 1rem",maxWidth:"50rem"},figure:{position:"sticky",width:"100%",margin:"0",transform:"translate3d(0, 0, 0)",zIndex:"0",display:"flex",justifyContent:"center",backgroundColor:"white"},"figure p":{textAlign:"center",padding:"1rem",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"8rem",fontWeight:"900",color:"#fff"},".step":{margin:"0 auto 2rem auto",color:"#fff",height:"100vh"},".step:last-child":{marginBottom:"0"},".step.is-active":{backgroundColor:"#FFF",color:"#3b3b3b"},".step p":{textAlign:"center",padding:"1rem",fontSize:"1.5rem",width:"100%"},img:{alignSelf:"center"}},Zt=[{player_name:"N'Golo Kanté",variable:"height",value:98,metric_type:"Advanced"},{player_name:"N'Golo Kanté",variable:"weight",value:68,metric_type:"Advanced"},{player_name:"N'Golo Kanté",variable:"goals",value:20,metric_type:"Traditional"},{player_name:"N'Golo Kanté",variable:"assists",value:35,metric_type:"Traditional"},{player_name:"N'Golo Kanté",variable:"minutes_played",value:100,metric_type:"Advanced"},{player_name:"N'Golo Kanté",variable:"xG",value:30,metric_type:"Advanced"},{player_name:"N'Golo Kanté",variable:"xA",value:25,metric_type:"Advanced"},{player_name:"N'Golo Kanté",variable:"shots",value:25,metric_type:"Traditional"},{player_name:"N'Golo Kanté",variable:"key_passes",value:30,metric_type:"Traditional"},{player_name:"N'Golo Kanté",variable:"dribbles",value:100,metric_type:"Traditional"}],Ce=[{player_name:"Riyad Mahrez",variable:"height",value:100,metric_type:"Advanced"},{player_name:"Riyad Mahrez",variable:"weight",value:68,metric_type:"Advanced"},{player_name:"Riyad Mahrez",variable:"goals",value:80,metric_type:"Traditional"},{player_name:"Riyad Mahrez",variable:"assists",value:100,metric_type:"Traditional"},{player_name:"Riyad Mahrez",variable:"minutes_played",value:90,metric_type:"Advanced"},{player_name:"Riyad Mahrez",variable:"xG",value:90,metric_type:"Advanced"},{player_name:"Riyad Mahrez",variable:"xA",value:63,metric_type:"Advanced"},{player_name:"Riyad Mahrez",variable:"shots",value:92,metric_type:"Traditional"},{player_name:"Riyad Mahrez",variable:"key_passes",value:100,metric_type:"Traditional"},{player_name:"Riyad Mahrez",variable:"dribbles",value:37,metric_type:"Traditional"}];let Qn=I;window.addEventListener("scroll",()=>{const t=window.innerHeight+window.scrollY,e=document.documentElement.scrollHeight;if(B===1&&t>=e){B=4,document.getElementById("story").innerHTML=$o,Jn(Zn);const i=[{player_name:"Jamie Vardy",variable:"height",value:100,metric_type:"Advanced"},{player_name:"Jamie Vardy",variable:"weight",value:75,metric_type:"Advanced"},{player_name:"Jamie Vardy",variable:"goals",value:100,metric_type:"Traditional"},{player_name:"Jamie Vardy",variable:"assists",value:60,metric_type:"Traditional"},{player_name:"Jamie Vardy",variable:"minutes_played",value:90,metric_type:"Advanced"},{player_name:"Jamie Vardy",variable:"xG",value:100,metric_type:"Advanced"},{player_name:"Jamie Vardy",variable:"xA",value:42,metric_type:"Advanced"},{player_name:"Jamie Vardy",variable:"shots",value:92,metric_type:"Traditional"},{player_name:"Jamie Vardy",variable:"key_passes",value:50,metric_type:"Traditional"},{player_name:"Jamie Vardy",variable:"dribbles",value:31,metric_type:"Traditional"}];J(i.map((a,s)=>({...a,value:0})),"#vardy","Key Performance Metrics"),ut({onStepEnter:a=>{const s=a.element.dataset.step;it(".step").classed("is-active",function(o,l){return l===a.index}),I=s},onStepProgress:({progress:a})=>{a===1&&Qn!==I||(Qn=I,I==1&&(J(i.map((s,o)=>({...s,value:s.value*a/2})),"#vardy","Key Performance Metrics"),it("#profile").attr("src","vardy.PNG")),I==2&&J(i.map((s,o)=>({...s,value:s.value*(.5+a/2)})),"#vardy","Key Performance Metrics"),I==3&&(J(i.map((s,o)=>({...s,value:s.value*(1-a/2)+Zt[o].value*a/2})),"#vardy","Key Performance Metrics"),it("#profile").attr("src","kante.PNG")),I==4&&J(i.map((s,o)=>({...s,value:s.value*(.5-a/2)+Zt[o].value*(.5+a/2)})),"#vardy","Key Performance Metrics"),I==5&&(J(Zt.map((s,o)=>({...s,value:s.value*(1-a/2)+Ce[o].value*a/2})),"#vardy","Key Performance Metrics"),it("#profile").attr("src","maharez.PNG")),I==6&&J(Zt.map((s,o)=>({...s,value:s.value*(.5-a/2)+Ce[o].value*(.5+a/2)})),"#vardy","Key Performance Metrics"),I==7&&J(Ce,"#vardy","Key Performance Metrics"))}});return}if(B===4&&t>=e){B=5,document.getElementById("story").innerHTML=`           

            <div id="picture-container">
                <img id="moving-picture" src="moneyball_magic.PNG" alt="Crawling Picture" />
            </div>
            

            <section id="outro"></section>
            
            <section id="scrolly" style="background-color: white;">
                <article>
<div class="step" data-step="1">
    <p><strong>Moneyball: Revolutionizing Sports Recruitment</strong></p>
    <p>The concept of <strong>"Moneyball"</strong> has flipped the script on how sports teams scout and build their squads. Born in baseball, this revolutionary approach uses <strong>data and analytics</strong> to uncover hidden talent and maximize value. Instead of relying on gut instincts or traditional scouting, Moneyball relies on cold, hard numbers—like <strong>performance-to-cost ratios</strong>—to spot overlooked players who pack a punch. Its influence has spilled into football, where clubs are learning to find <strong>diamonds in the rough</strong>, delivering world-class results without spending a fortune.</p>
</div>

<div class="step" data-step="2">
    <p><strong>The Efficiency Matrix: A Treasure Map for Football Clubs</strong></p>
    <p>The <strong>Efficiency Matrix</strong> is like a football club’s treasure map, showing exactly where value hides. It balances two key factors: a player’s <strong>market value</strong> and their <strong>contribution on the pitch</strong>. The result? Players are placed into four categories:
        <ul>
            <li><strong>Undervalued Gems:</strong> Players who give you more than you paid for.</li>
            <li><strong>Big Spends:</strong> Pricey stars who justify their cost.</li>
            <li><strong>Inefficient Investments:</strong> Low-cost players who still fail to deliver.</li>
            <li><strong>Expensive Risks:</strong> High-cost players who may not always match their hefty price tags.</li>
        </ul>
        </p>
    <p>This tool helps clubs separate the stars from the duds and find the best bang for their buck.</p>
</div>

<div class="step" data-step="3">
    <p><strong>Leicester City: The Kings of Value Recruitment</strong></p>
    <p><strong>Leicester City’s recruitment team</strong> played a blinder by spotting value where others didn’t. 
        <ul>
            <li><strong>N’Golo Kanté:</strong> Signed for just €8 million, became the engine of their midfield, snapping up balls and winning hearts.</li>
            <li><strong>Riyad Mahrez:</strong> A €500,000 bargain, brought creativity and flair that rivaled football’s elite.</li>
            <li><strong>Jamie Vardy:</strong> His rise from a €1 million non-league signing to a Premier League Golden Boot winner is nothing short of legendary.</li>
        </ul>
        </p>
    <p>These players led Leicester to the <strong>2015-16 Premier League title</strong>, defying the odds and humiliating much wealthier clubs. The <strong>Efficiency Matrix</strong> makes sense of their success, revealing how underrated talent can conquer even the biggest names in the game.</p>
</div>

<div class="step" data-step="4">
    <p><strong>Moneyball: A Blueprint for Footballing Success</strong></p>
    <p>Moneyball is more than just a strategy; it’s a <strong>blueprint for footballing success</strong>. By spending just €10 million to bring in Kanté, Mahrez, and Vardy, Leicester City created a €100 million goldmine while delivering an unforgettable Premier League triumph. Kanté’s <strong>energy</strong>, Mahrez’s <strong>skill</strong>, and Vardy’s <strong>killer instinct</strong> showed that with smart recruitment, you don’t need billions to compete with the giants. The <strong>Efficiency Matrix</strong> empowers clubs to replicate this success by pinpointing undervalued players and striking the right balance between <strong>big-name investments</strong> and <strong>hidden gems</strong>. In today’s football world, where budgets are under the microscope, this approach is the ultimate game-changer.</p>
</div>

                </article>

                <figure>
                    <img id="v1" src="V1.PNG" width="100%" />
                </figure>
            </section>
        

            <section id="outro"></section>
        `;const i=document.querySelector("#picture-container"),a=100,s=800,o=800,l=1500;window.addEventListener("scroll",()=>{const c=window.scrollY;if(c>=a&&c<=s){const u=(c-a)/(s-a);i.style.right=`${-100+u*104}%`,i.style.transform="translateY(-50%)"}if(c>o&&c<=l){const u=(c-o)/(l-o);i.style.transform=`translateY(${-50-u*350}%)`}}),Jn(Zn),ut({onStepEnter:c=>{const u=c.element.dataset.step;it(".step").classed("is-active",function(h,f){return f===c.index}),I=u,u==2&&L("#v1").transition().duration(200).style("opacity",0).on("end",function(){L(this).attr("src","V2.PNG").transition().duration(500).style("opacity",1)}),u==3&&L("#v1").transition().duration(200).style("opacity",0).on("end",function(){L(this).attr("src","V3.PNG").transition().duration(500).style("opacity",1)}),u==4&&L("#v1").transition().duration(200).style("opacity",0).on("end",function(){L(this).attr("src","V4.PNG").transition().duration(500).style("opacity",1)})}});return}if(B===5&&t>=e){B=6,document.getElementById("story").innerHTML=`
            <section style="height: 100vh;"></section>
    <section id="scrolly">
        <figure>
        <svg id="bar-chart"></svg>
    </figure>
        <article style="max-width: 40rem;">
  <div class="step" data-index="1" style="opacity: 0;"></div>

  
  <div class="step" data-index="2" style="opacity: 0;"></div>
  
  <div class="step" data-index="3" style="opacity: 0;"></div>
  
  <div class="step" data-index="4"><p style="background-color: black; border-radius: 20px;">The Leicester City's 2015–16 Premier League victory was collaboration and strategy rather than ball possession. They were excellent at counterattacking quickly, turning small chances into crucial ones. Riyad Mahrez's inventiveness and Jamie Vardy's speed, combined with accurate passes from Marc Albrighton and Mahrez, guaranteed outstanding goal-scoring effectiveness. Their victory was genuinely inspirational because of their well-organized, unified play, which demonstrated that good execution is more important than controlling possession.</p></div>

        </article>
    </section>

    <section style="height: 100vh;"></section>
            `;const i=[{Squad:"Aston Villa","G+A":43},{Squad:"Watford","G+A":56},{Squad:"West Brom","G+A":57},{Squad:"Crystal Palace","G+A":59},{Squad:"Norwich City","G+A":65},{Squad:"Swansea City","G+A":66},{Squad:"Stoke City","G+A":69},{Squad:"Bournemouth","G+A":71},{Squad:"Sunderland","G+A":74},{Squad:"Manchester Utd","G+A":77},{Squad:"Newcastle Utd","G+A":77},{Squad:"Chelsea","G+A":95},{Squad:"Everton","G+A":100},{Squad:"West Ham","G+A":102},{Squad:"Southampton","G+A":103},{Squad:"Leicester City","G+A":111},{Squad:"Liverpool","G+A":112},{Squad:"Arsenal","G+A":115},{Squad:"Tottenham","G+A":118},{Squad:"Manchester City","G+A":124}],a={top:50,right:20,bottom:75,left:50},s=window.innerWidth-a.left-a.right,o=500-a.top-a.bottom,l=L("#bar-chart").attr("width",s+a.left+a.right).attr("height",o+a.top+a.bottom).append("g").attr("transform",`translate(${a.left}, ${a.top})`),c=Se().domain(i.map(f=>f.Squad)).range([0,s]).padding(.1),u=Jt().domain([0,qe(i,f=>f["G+A"])]).range([o,0]);l.append("g").attr("class","x-axis").style("fill","black").attr("transform",`translate(0, ${o})`).call(Fe(c).tickSize(0).tickPadding(10)).selectAll("text").style("font-size","10px").style("text-anchor","end").attr("transform","rotate(-45)"),l.append("g").attr("class","y-axis").style("fill","black").call(He(u).ticks(5)),l.selectAll(".x-axis text").style("fill","black").style("font-size","12px"),l.selectAll(".y-axis text").style("fill","black").style("font-size","12px");const h=l.selectAll(".bar").data(i).enter().append("rect").style("fill","#FDBE11").attr("class","bar").attr("x",f=>c(f.Squad)).attr("y",o).attr("width",c.bandwidth()).attr("height",0);h.each(function(f){const d=L(this);f.Squad==="Leicester City"&&d.style("fill","orangered")}),l.selectAll(".x-axis path, .x-axis line").style("stroke","black"),l.selectAll(".x-axis text").style("fill","black"),l.append("text").attr("x",s/2).attr("y",-10).attr("text-anchor","middle").style("font-size","24px").style("font-weight","bold").style("fill","white").text("Efficiency Metrics: Goals Plus Assists"),ut({onStepProgress:f=>{const d=+f.element.dataset.index,y=f.progress,p=5,m=d*p,w=m+p;h.each(function(_,k){const $=L(this);k<m?$.attr("y",u(_["G+A"])).attr("height",o-u(_["G+A"])):k>=m&&k<w?$.attr("y",u(_["G+A"]*y)).attr("height",o-u(_["G+A"]*y)):$.attr("y",o).attr("height",0)})}});return}if(B===6&&t>=e){B=7,document.getElementById("story").innerHTML=`
            <section style="height: 100vh;"></section>
    <section id="scrolly">
        <figure>
        <svg id="line-chart"></svg>
    </figure>
        <article style="max-width: 40rem;">
             <div class="step" data-index="0" style="opacity: 0;"></div>
  <div class="step" data-index="1"><p style="background-color: black; border-radius: 20px;">Despite average offensive metrics, Leicester maximized their opportunities and showcased defensive resilience. Their 2015/16 season was an anomaly in Premier League history, driven by efficiency rather than dominance. Their offensive statistics were mediocre in comparison to other championship-winning teams, but what made them stand out was their capacity to seize opportunities and withstand pressure.</p></div>

  <div class="step" data-index="2"><p style="background-color: black; border-radius: 20px;">Leicester scored 68 goals, which is in close agreement with their xG of 66, according to the expected goals (xG) metric. This effectiveness demonstrates that they made the most of their opportunities even if they didn't generate many more than their rivals. Jamie Vardy and Riyad Mahrez were among the key players who made sure that even half-chances frequently resulted in goals.</p></div>

  <div class="step" data-index="3"><p style="background-color: black; border-radius: 20px;">Their success was primarily due to their defensive prowess. Their ability to nullify opponent assaults was demonstrated by their regularly better-than-expected xG against, which was lower than the league average. Important contributions were made by their disciplined backline, which remained resilient under duress, and N'Golo Kanté, whose unwavering work ethic supported their midfield. Kasper Schmeichel, the goalie, also had an exceptional season, making crucial saves at crucial times.</p></div>

  <div class="step" data-index="4"><p style="background-color: black; border-radius: 20px;">The graph illustrates Leicester's impressive goal differential in the 2015–16 campaign as opposed to their difficulties in the 2016–17 campaign. Even though they kept a large portion of their team, their performance declined sharply, highlighting the exceptional coincidence of circumstances needed to win the championship. Leicester's success was the result of a confluence of luck, strategy, and unity rather than just skill. Their triumph is a permanent reminder that in athletics, effectiveness and faith can triumph over strength and disadvantage.</p></div>


        </article>
    </section>

    <section style="height: 100vh;"></section>
            `;const i=[{season:"2013/14",differential:-7},{season:"2014/15",differential:-2},{season:"2015/16",differential:32},{season:"2016/17",differential:-15},{season:"2017/18",differential:-2}],a={top:50,right:20,bottom:50,left:50},s=window.innerWidth-a.left-a.right,o=500-a.top-a.bottom,l=L("#line-chart").attr("width",s+a.left+a.right).attr("height",o+a.top+a.bottom).append("g").attr("transform",`translate(${a.left},${a.top})`),c=lo().domain(i.map(p=>p.season)).range([0,s]),u=Jt().domain([_r(i,p=>p.differential),qe(i,p=>p.differential)]).range([o,0]);l.append("g").attr("class","x-axis").style("fill","black").attr("transform",`translate(0,${o})`).call(Fe(c)),l.append("g").attr("class","y-axis").style("fill","black").call(He(u)),l.selectAll(".x-axis text").style("fill","black").style("font-size","12px"),l.selectAll(".y-axis text").style("fill","black").style("font-size","12px");const h=Kn().x(p=>c(p.season)).y(p=>u(p.differential)).curve(Ao),f=l.append("path").datum(i).attr("fill","none").attr("stroke","#FDBE11").attr("stroke-width",2).attr("d",h);l.append("text").attr("x",s/2).attr("y",-10).attr("text-anchor","middle").style("font-size","24px").style("font-weight","bold").style("fill","white").text("Goal Differential Across Seasons");const d=f.node().getTotalLength();f.attr("stroke-dasharray",`${d} ${d}`).attr("stroke-dashoffset",d);const y=it(".step").nodes();ut({onStepProgress:p=>{const m=+p.element.dataset.index,w=p.progress;f.attr("stroke-dashoffset",d*(1-(m+w)/y.length))}});return}if(B===7&&t>=e){let i=function(){const a=window.scrollY;n.style.transform=`translateY(${a*.3}px)`,r.style.transform=`translateY(${a*.5}px)`,r.style.marginTop=`${1800-a/3}px`};B=8,document.getElementById("story").innerHTML=`
            
            <div class="parallax-container">
    <div id="parallax-bg" style="background-image: url('outliers.png'); background-size: auto;"></div>
</div>
<div class="parallax-container">
    <div id="parallax-bg-2" style="background-image: url('end.png'); background-size: auto;"></div>
</div>

<section style="height: 100vh;"></section>
    <section id="scrolly">
        <article>
            <div class="step" data-step="1" style="max-width: 40rem;">
        <p style="background-color: black; border-radius: 20px;">Leicester’s fairytale win</strong> is a perfect example of how success can be the result of interconnected factors, each building upon the other, leading to the unexpected. It wasn’t about luck; it was about <strong>taking advantage of every opportunity</strong> and turning small advantages into a cumulative force.</p>
         </div>
            <div class="step" data-step="2" style="max-width: 40rem;">
        <p style="background-color: black; border-radius: 20px;">
  <em>Gladwell</em> would call this <strong>the power of timing</strong>.</p>
         </div>
        
         
        </article>
    </section>

    <section style="height: 100vh;"></section>
            `,document.querySelectorAll(".step").forEach(a=>a.style.height="auto !important");var n=document.getElementById("parallax-bg"),r=document.getElementById("parallax-bg-2");n.style.marginTop="600px",r.style.marginTop="1800px",window.addEventListener("scroll",i),ut()}})})();
